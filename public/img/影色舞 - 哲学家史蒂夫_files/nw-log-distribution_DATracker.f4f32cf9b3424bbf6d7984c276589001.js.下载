"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(){var e,t,r,n,i={DEBUG:!1,LIB_VERSION:"1.6.12.4"},o=function(e,t){if("[object Array]"!==Object.prototype.toString.apply(e))return-1;if(!e&&!t)return-1;for(var r=0;r<e.length;r++)if("function"==typeof e[r].indexOf&&e[r].indexOf(t)>0)return r;return-1},a=((e="undefined"==typeof window?{navigator:{userAgent:""},document:{}}:window).document,e.navigator.userAgent);r=e.device,t={},e.device=t,a=a.toLowerCase(),t.lofter=function(){return n("lofter")},t.ios=function(){return t.iphone()||t.ipod()||t.ipad()},t.iphone=function(){return!t.windows()&&n("iphone")},t.ipod=function(){return n("ipod")},t.ipad=function(){return n("ipad")},t.android=function(){return!t.windows()&&n("android")},t.androidPhone=function(){return t.android()&&n("mobile")},t.androidTablet=function(){return t.android()&&!n("mobile")},t.blackberry=function(){return n("blackberry")||n("bb10")||n("rim")},t.blackberryPhone=function(){return t.blackberry()&&!n("tablet")},t.blackberryTablet=function(){return t.blackberry()&&n("tablet")},t.windows=function(){return n("windows")},t.windowsPhone=function(){return t.windows()&&n("phone")},t.windowsTablet=function(){return t.windows()&&n("touch")&&!t.windowsPhone()},t.fxos=function(){return(n("(mobile;")||n("(tablet;"))&&n("; rv:")},t.fxosPhone=function(){return t.fxos()&&n("mobile")},t.fxosTablet=function(){return t.fxos()&&n("tablet")},t.meego=function(){return n("meego")},t.cordova=function(){return e.cordova&&"file:"===location.protocol},t.nodeWebkit=function(){return"object"===_typeof(e.process)},t.mobile=function(){return t.androidPhone()||t.iphone()||t.ipod()||t.windowsPhone()||t.blackberryPhone()||t.fxosPhone()||t.meego()},t.tablet=function(){return t.ipad()||t.androidTablet()||t.blackberryTablet()||t.windowsTablet()||t.fxosTablet()},t.desktop=function(){return!t.tablet()&&!t.mobile()},t.television=function(){var e,t=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];for(e=0;e<t.length;){if(n(t[e]))return!0;e++}return!1},t.portrait=function(){return e.innerHeight/e.innerWidth>1},t.landscape=function(){return e.innerHeight/e.innerWidth<1},t.noConflict=function(){return e.device=r,this},n=function(e){return-1!==a.indexOf(e)},t.devicePlatform=function(){var e="web";return t.ios()?t.ipad()?e="iPad":t.iphone()?e="iPhone":t.ipod()&&(e="iPod touch"):e=t.android()?t.androidTablet()?"Tablet":"Phone":t.blackberry()?t.blackberryTablet()?"Tablet":"Phone":t.windows()?t.windowsTablet()?"Tablet":t.windowsPhone()?"Phone":"web":t.fxos()?t.fxosTablet()?"Tablet":"Phone":t.meego()?"Phone":"web",e},t.deviceModel=function(){var r="";if(t.android()){var n=e.navigator.userAgent.split(";"),i=o(n,"Build/");i>-1&&(r=n[i].substring(0,n[i].indexOf("Build/")))}else t.ios()&&t.iphone()&&(r="iPhone");return r},t.getClientHubbleDeviceId=function(){var e=a.match(/lofter[^\(]*\([^\(]*\) (\([^\(]*; ([^\(]*); [^\(]*\))/i);return e?e[2]:""},Object.prototype.hasOwnProperty.call(e,"onorientationchange");var s,c=t;s="undefined"==typeof window?{navigator:{}}:window;var u,l=Array.prototype,p=Function.prototype,d=Object.prototype,f=l.slice,_=d.hasOwnProperty,h=s.console,g=(s.navigator,s.document),b=p.bind,v=l.forEach,y=l.indexOf,k=Array.isArray,w={},T={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},S=function(){if(i.DEBUG&&!T.isUndefined(h)&&h)try{h.log.apply(h,arguments)}catch(e){T.each(arguments,(function(e){h.log(e)}))}},x=function(){if(i.DEBUG&&!T.isUndefined(h)&&h){var e=["DATracker error:"].concat(T.toArray(arguments));try{h.error.apply(h,e)}catch(t){T.each(e,(function(e){h.error(e)}))}}},A=function(){if(!T.isUndefined(h)&&h){var e=["DATracker error:"].concat(T.toArray(arguments));try{h.error.apply(h,e)}catch(t){T.each(e,(function(e){h.error(e)}))}}},D="-1",N=s.external,O=s.navigator.userAgent||"",C=s.navigator.appVersion||"",P=s.navigator.vendor||"",E=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,I=/\bbb10\b.+?\bversion\/([\d.]+)/,j=/\bblackberry\b.+\bversion\/([\d.]+)/,L=/\bblackberry\d+\/([\d.]+)/;function U(e){return Object.prototype.toString.call(e)}var q=[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm\b|redmi[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var t=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:t.test(e)?t:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],z=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["iOS",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["Android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var t=e.match(I)||e.match(j)||e.match(L);return t?{version:t[1]}:"blackberry"}]],R=[["edgehtml",/edge\/([0-9.]+)/],["trident",E],["blink",function(){return"chrome"in s&&"CSS"in s&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var t;if(t=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/))return{version:t[1]+"."+t[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],B=[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=V("theworld");return void 0!==e?e:"theworld"}],["360",function(e){var t=V("360se");return void 0!==t?t:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(N&&(N.mxVersion||N.max_version))return{version:N.mxVersion||N.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var t;try{N&&N.LiebaoGetVersion&&(t=N.LiebaoGetVersion())}catch(e){}return{version:t||D}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",E],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var t=/\bopera.+version\/([0-9.ab]+)/;return t.test(e)?t:/\bopr\/([0-9.]+)/}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var t=e.match(I)||e.match(j)||e.match(L);return t?{version:t[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]];function V(e){if(N)try{var t=N.twGetRunPath.toLowerCase(),r=N.twGetSecurityID(s),n=N.twGetVersion(r);if(t&&-1===t.indexOf(e))return!1;if(n)return{version:n}}catch(e){}}function $(e,t,r){var n="[object Function]"===U(t)?t.call(null,r):t;if(!n)return null;var i={name:e,version:D,codename:""},o=U(n);if(!0===n)return i;if("[object String]"===o){if(-1!==r.indexOf(n))return i}else{if(function(e){return"[object Object]"===U(e)}(n))return n.hasOwnProperty("version")&&(i.version=n.version),i;if(n.exec){var a=n.exec(r);if(a)return a.length>=2&&a[1]?i.version=a[1].replace(/_/g,"."):i.version=D,i}}}var H={name:"",version:""};function M(e,t,r,n){var i=H;!function(e,t){for(var r=0,n=e.length;r<n&&!1!==t.call(e,e[r],r);r++);}(t,(function(t){var r=$(t[0],t[1],e);if(r)return i=r,!1})),r.call(n,i.name,i.version)}var J,F,K,W,G,Y,X,Q,Z,ee,te,re;function ne(e){var t=null,r=null,n=e||{};window.hubbledata_app_js_bridge_call_js=function(e){!function(e){t=e,T.isJSONString(t)&&(t=JSON.parse(t)),r&&r(t)}(e)};return{getAppStatus:function(e){if(function(){if(/hubbledata-sdk-ios/.test(navigator.userAgent)){n.pageOpenScene="App";var e=document.createElement("iframe");e.setAttribute("src","hubbledata://getAppInfo"),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}}(),"object"===_typeof(window.HubbleData_APP_JS_Bridge)&&window.HubbleData_APP_JS_Bridge.hubbledata_call_app&&(n.pageOpenScene="App",t=HubbleData_APP_JS_Bridge.hubbledata_call_app(),T.isJSONString(t)&&(t=JSON.parse(t))),!e)return t;null===t?r=e:e(t)},getSendCall:function(e,t,r,i){e=T.JSONDecode(e),T.include(["da_session_close","da_session_start","da_activate","da_u_login","da_u_logout","da_u_signup"],t)?("function"==typeof i&&i(),"function"==typeof r&&r()):"object"===_typeof(window.HubbleData_APP_JS_Bridge)&&window.HubbleData_APP_JS_Bridge.hubbledata_track?(n.pageOpenScene="App",e.pageOpenScene="App",e=T.JSONEncode(e),window.HubbleData_APP_JS_Bridge.hubbledata_track(e),"function"==typeof r&&r()):/hubbledata-sdk-ios/.test(navigator.userAgent)?(n.pageOpenScene="App",e.pageOpenScene="App",function(e){var t=document.createElement("iframe");t.setAttribute("src","hubbledata://trackEvent?event="+encodeURIComponent(e)),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}(e=T.JSONEncode(e)),"function"==typeof r&&r()):("function"==typeof i&&i(),"function"==typeof r&&r())}}}u=function(e){e=(e||"").toLowerCase();var t={};M(e,q,(function(e,r){var n=parseFloat(r);t.device={name:e,version:n,fullVersion:r},t.device[e]=n}),t),M(e,z,(function(e,r){var n=parseFloat(r);t.os={name:e,version:n,fullVersion:r},t.os[e]=n}),t);var r=function(e){if(!E.test(e))return null;var t,r,n,i,o;if(-1!==e.indexOf("trident/")&&(t=/\btrident\/([0-9.]+)/.exec(e))&&t.length>=2){n=t[1];var a=t[1].split(".");a[0]=parseInt(a[0],10)+4,o=a.join(".")}i=(t=E.exec(e))[1];var s=t[1].split(".");return void 0===o&&(o=i),s[0]=parseInt(s[0],10)-4,r=s.join("."),void 0===n&&(n=r),{browserVersion:o,browserMode:i,engineVersion:n,engineMode:r,compatible:n!==r}}(e);return M(e,R,(function(e,n){var i=n;r&&(n=r.engineVersion||r.engineMode,i=r.engineMode);var o=parseFloat(n);t.engine={name:e,version:o,fullVersion:n,mode:parseFloat(i),fullMode:i,compatible:!!r&&r.compatible},t.engine[e]=o}),t),M(e,B,(function(e,n){var i=n;r&&("ie"===e&&(n=r.browserVersion),i=r.browserMode);var o=parseFloat(n);t.browser={name:e,version:o,fullVersion:n,mode:parseFloat(i),fullMode:i,compatible:!!r&&r.compatible},t.browser[e]=o}),t),t}(O+" "+C+" "+P),T.trim=function(e){if(e)return e.replace(/(^\s*)|(\s*$)/g,"")},T.checkTime=function(e){return!!e&&!!/^(\d{4})-(\d{2})-(\d{2})$/.test(e)},T.bind=function(e,t){var r,n;if(b&&e.bind===b)return b.apply(e,f.call(arguments,1));if(!T.isFunction(e))throw new TypeError;return r=f.call(arguments,2),n=function(){if(!_instanceof(this,n))return e.apply(t,r.concat(f.call(arguments)));var i={};i.prototype=e.prototype;var o=new i;i.prototype=null;var a=e.apply(o,r.concat(f.call(arguments)));return Object(a)===a?a:o},n},T.bind_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=T.bind(e[t],e))},T.each=function(e,t,r){if(null!=e)if(v&&e.forEach===v)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n,e)===w)return}else for(var o in e)if(_.call(e,o)&&t.call(r,e[o],o,e)===w)return},T.escapeHTML=function(e){var t=e;return t&&T.isString(t)&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),t},T.extend=function(e){return T.each(f.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])})),e},T.deepMerge=function(e,t){var r;for(r in t)e[r]=e[r]&&"[object Object]"===e[r].toString()?T.deepMerge(e[r],t[r]):e[r]=t[r];return e},T.isArray=k||function(e){return"[object Array]"===Object.prototype.toString.apply(e)},T.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},T.isArguments=function(e){return!(!e||!_.call(e,"callee"))},T.toArray=function(e){return e?e.toArray?e.toArray():T.isArray(e)||T.isArguments(e)?f.call(e):T.values(e):[]},T.values=function(e){var t=[];return null===e||T.each(e,(function(e){t[t.length]=e})),t},T.identity=function(e){return e},T.include=function(e,t){var r=!1;return null===e?r:y&&e.indexOf===y?-1!=e.indexOf(t):(T.each(e,(function(e){if(r||(r=e===t))return w})),r)},T.includes=function(e,t){return-1!==e.indexOf(t)},T.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},T.isObject=function(e){return e===Object(e)&&!T.isArray(e)},T.isEmptyObject=function(e){if(T.isObject(e)){for(var t in e)if(_.call(e,t))return!1;return!0}return!1},T.isUndefined=function(e){return void 0===e},T.isString=function(e){return"[object String]"==Object.prototype.toString.call(e)},T.isDate=function(e){return"[object Date]"==U.call(e)},T.isNumber=function(e){return"[object Number]"==U.call(e)},T.isElement=function(e){return!(!e||1!==e.nodeType)},T.encodeDates=function(e){return T.each(e,(function(t,r){T.isDate(t)?e[r]=T.formatDate(t):T.isObject(t)&&(e[r]=T.encodeDates(t))})),e},T.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},T.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},T.safewrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){A("Implementation error. Please contact support@DATracker.com.")}}},T.safewrap_class=function(e,t){for(var r=0;r<t.length;r++)e.prototype[t[r]]=T.safewrap(e.prototype[t[r]])},T.safewrap_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=T.safewrap(e[t]))},T.strip_empty_properties=function(e){var t={};return T.each(e,(function(e,r){T.isString(e)&&e.length>0&&(t[r]=e)})),t},T.truncate=function(e,t){var r;return"string"==typeof e?r=e.slice(0,t):T.isArray(e)?(r=[],T.each(e,(function(e){r.push(T.truncate(e,t))}))):T.isObject(e)?(r={},T.each(e,(function(e,n){r[n]=T.truncate(e,t)}))):r=e,r},T.JSONEncode=function(e){var t=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'};return function e(r,n){var i="",o=0,a="",s="",c=0,u=i,l=[],p=n[r];switch(p&&"object"===_typeof(p)&&"function"==typeof p.toJSON&&(p=p.toJSON(r)),_typeof(p)){case"string":return t(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(i+="    ",l=[],"[object Array]"===U.apply(p)){for(c=p.length,o=0;o<c;o+=1)l[o]=e(o,p)||"null";return s=0===l.length?"[]":i?"[\n"+i+l.join(",\n"+i)+"\n"+u+"]":"["+l.join(",")+"]",i=u,s}for(a in p)_.call(p,a)&&(s=e(a,p))&&l.push(t(a)+(i?": ":":")+s);return s=0===l.length?"{}":i?"{"+l.join(",")+u+"}":"{"+l.join(",")+"}",i=u,s}}("",{"":e})},T.JSONDecode=(G={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},Y=function(e){throw{name:"SyntaxError",message:e,at:J,text:K}},X=function(e){return e&&e!==F&&Y("Expected '"+e+"' instead of '"+F+"'"),F=K.charAt(J),J+=1,F},Q=function(){var e,t="";for("-"===F&&(t="-",X("-"));F>="0"&&F<="9";)t+=F,X();if("."===F)for(t+=".";X()&&F>="0"&&F<="9";)t+=F;if("e"===F||"E"===F)for(t+=F,X(),"-"!==F&&"+"!==F||(t+=F,X());F>="0"&&F<="9";)t+=F,X();if(e=+t,isFinite(e))return e;Y("Bad number")},Z=function(){var e,t,r,n="";if('"'===F)for(;X();){if('"'===F)return X(),n;if("\\"===F)if(X(),"u"===F){for(r=0,t=0;t<4&&(e=parseInt(X(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof G[F])break;n+=G[F]}else n+=F}Y("Bad string")},ee=function(){for(;F&&F<=" ";)X()},te=function(){var e=[];if("["===F){if(X("["),ee(),"]"===F)return X("]"),e;for(;F;){if(e.push(W()),ee(),"]"===F)return X("]"),e;X(","),ee()}}Y("Bad array")},re=function(){var e,t={};if("{"===F){if(X("{"),ee(),"}"===F)return X("}"),t;for(;F;){if(e=Z(),ee(),X(":"),Object.hasOwnProperty.call(t,e)&&Y('Duplicate key "'+e+'"'),t[e]=W(),ee(),"}"===F)return X("}"),t;X(","),ee()}}Y("Bad object")},W=function(){switch(ee(),F){case"{":return re();case"[":return te();case'"':return Z();case"-":return Q();default:return F>="0"&&F<="9"?Q():function(){switch(F){case"t":return X("t"),X("r"),X("u"),X("e"),!0;case"f":return X("f"),X("a"),X("l"),X("s"),X("e"),!1;case"n":return X("n"),X("u"),X("l"),X("l"),null}Y('Unexpected "'+F+'"')}()}},function(e){var t;return K=e,J=0,F=" ",t=W(),ee(),F&&Y("Syntax error"),t}),T.base64Encode=function(e){var t,r,n,i,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,c=0,u="",l=[];if(!e)return e;e=T.utf8Encode(e);do{t=(o=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,r=o>>12&63,n=o>>6&63,i=63&o,l[c++]=a.charAt(t)+a.charAt(r)+a.charAt(n)+a.charAt(i)}while(s<e.length);switch(u=l.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u},T.utf8Encode=function(e){var t,r,n,i,o="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<n;i++){var a=e.charCodeAt(i),s=null;a<128?r++:s=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==s&&(r>t&&(o+=e.substring(t,r)),o+=s,t=r=i+1)}return r>t&&(o+=e.substring(t,e.length)),o},T.sha1=function(e){function t(e){return c(r(s(e),8*e.length))}function r(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var r=Array(80),s=1732584193,c=-271733879,u=-1732584194,l=271733878,p=-1009589776,d=0;d<e.length;d+=16){for(var f=s,_=c,h=u,g=l,b=p,m=0;m<80;m++){r[m]=m<16?e[d+m]:a(r[m-3]^r[m-8]^r[m-14]^r[m-16],1);var v=o(o(a(s,5),n(m,c,u,l)),o(o(p,r[m]),i(m)));p=l,l=u,u=a(c,30),c=s,s=v}s=o(s,f),c=o(c,_),u=o(u,h),l=o(l,g),p=o(p,b)}return Array(s,c,u,l,p)}function n(e,t,r,n){return e<20?t&r|~t&n:e<40?t^r^n:e<60?t&r|t&n|r&n:t^r^n}function i(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function o(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function a(e,t){return e<<t|e>>>32-t}function s(e){for(var t=Array(),r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t}function c(e){for(var t="0123456789abcdef",r="",n=0;n<4*e.length;n++)r+=t.charAt(e[n>>2]>>8*(3-n%4)+4&15)+t.charAt(e[n>>2]>>8*(3-n%4)&15);return r}return t(e)},T.UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},T.isBlockedUA=function(e){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)},T.HTTPBuildQuery=function(e,t){var r,n,i=[];return T.isUndefined(t)&&(t="&"),T.each(e,(function(e,t){r=encodeURIComponent(e.toString()),n=encodeURIComponent(t),i[i.length]=n+"="+r})),i.join(t)},T.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1]).replace(/\+/g," ")},T.getHashParam=function(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null},T.cookie={get:function(e){for(var t=e+"=",r=g.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},parse:function(e){var t;try{t=T.JSONDecode(T.cookie.get(e))||{}}catch(e){}return t},set_seconds:function(e,t,r,n,i){var o="",a="",s="";if(n){var c=g.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";o=u?"; domain=."+u:""}if(r){var l=new Date;l.setTime(l.getTime()+1e3*r),a="; expires="+l.toGMTString()}i&&(s="; secure"),g.cookie=e+"="+encodeURIComponent(t)+a+"; path=/"+o+s},set:function(e,t,r,n,i){var o="",a="",s="";if(n){var c=g.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";o=u?"; domain=."+u:""}if(r){var l=new Date;l.setTime(l.getTime()+24*r*60*60*1e3),a="; expires="+l.toGMTString()}i&&(s="; secure");var p=e+"="+encodeURIComponent(t)+a+"; path=/"+o+s;return g.cookie=p,p},remove:function(e,t){T.cookie.set(e,"",-1,t)}},T.localStorage={error:function(e){x("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(e){T.localStorage.error(e)}return null},parse:function(e){try{return T.JSONDecode(T.localStorage.get(e))||{}}catch(e){}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){T.localStorage.error(e)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(e){T.localStorage.error(e)}}},T.register_event=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,r,n,i,o){if(t)if(t.addEventListener&&!i)t.addEventListener(r,n,!!o);else{var a="on"+r,s=t[a];t[a]=function(t,r,n){return function(i){if(i=i||e(window.event)){var o,a,s=!0;return T.isFunction(n)&&(o=n(i)),a=r.call(t,i),!1!==o&&!1!==a||(s=!1),s}}}(t,n,s)}else x("No valid element provided to register_event")}}(),T.register_hash_event=function(e){T.register_event(window,"hashchange",e)},T.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}var t=/[\t\r\n]/g;function r(e,r){var n=" "+r+" ";return(" "+e.className+" ").replace(t," ").indexOf(n)>=0}function n(t){if(!g.getElementsByTagName)return[];var n,i,o,a,s,c,u,l,p,d,f=t.split(" "),_=[g];for(c=0;c<f.length;c++)if((n=f[c].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){o=(i=n.split("#"))[0];var h=i[1],b=g.getElementById(h);if(!b||o&&b.nodeName.toLowerCase()!=o)return[];_=[b]}else if(n.indexOf(".")>-1){o=(i=n.split("."))[0];var m=i[1];for(o||(o="*"),a=[],s=0,u=0;u<_.length;u++)for(p="*"==o?e(_[u]):_[u].getElementsByTagName(o),l=0;l<p.length;l++)a[s++]=p[l];for(_=[],d=0,u=0;u<a.length;u++)a[u].className&&T.isString(a[u].className)&&r(a[u],m)&&(_[d++]=a[u])}else{var v=n.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/);if(v){o=v[1];var y,k=v[2],w=v[3],S=v[4];for(o||(o="*"),a=[],s=0,u=0;u<_.length;u++)for(p="*"==o?e(_[u]):_[u].getElementsByTagName(o),l=0;l<p.length;l++)a[s++]=p[l];switch(_=[],d=0,w){case"=":y=function(e){return e.getAttribute(k)==S};break;case"~":y=function(e){return e.getAttribute(k).match(new RegExp("\\b"+S+"\\b"))};break;case"|":y=function(e){return e.getAttribute(k).match(new RegExp("^"+S+"-?"))};break;case"^":y=function(e){return 0===e.getAttribute(k).indexOf(S)};break;case"$":y=function(e){return e.getAttribute(k).lastIndexOf(S)==e.getAttribute(k).length-S.length};break;case"*":y=function(e){return e.getAttribute(k).indexOf(S)>-1};break;default:y=function(e){return e.getAttribute(k)}}for(_=[],d=0,u=0;u<a.length;u++)y(a[u])&&(_[d++]=a[u])}else{for(o=n,a=[],s=0,u=0;u<_.length;u++)for(p=_[u].getElementsByTagName(o),l=0;l<p.length;l++)a[s++]=p[l];_=a}}return _}return function(e){return T.isElement(e)?[e]:T.isObject(e)&&!T.isUndefined(e.length)?e:n.call(this,e)}}(),T.info={referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},properties:function(){var e={"5.0":"Win2000",5.1:"WinXP",5.2:"Win2003","6.0":"WindowsVista",6.1:"Win7",6.2:"Win8",6.3:"Win8.1","10.0":"Win10"},t=c.devicePlatform()||"web",r=c.deviceModel(),n=c.windows(),o=u.os.name+" "+u.os.fullVersion;return n&&e[u.os.fullVersion]&&(o=e[u.os.fullVersion]),T.extend(T.strip_empty_properties({deviceModel:r,deviceOs:u.os.name,deviceOsVersion:o,browser:u.browser.name,referrer:g.referrer,referring_domain:T.info.referringDomain(g.referrer),devicePlatform:t,currentDomain:T.info.referringDomain(window.location.href)}),{current_url:window.location.href,title:g.title||"",url_path:window.location.pathname||"",browser_version:u.browser.fullVersion,screen_height:screen.height,screen_width:screen.width,hb_lib:t,lib_version:i.LIB_VERSION})}},T.size=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r},T.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},T.get_host=function(e){var t="";null==e&&(e=window.location.href);var r=e.match(/.*\:\/\/([^\/]*).*/);return null!=r&&(t=r[1]),t},T.get_second_domain=function(e){var t="";try{if(e){var r=e.split(".");t=2===r.length?"."+e:3===r.length?"."+r[1]+"."+r[2]:e.substring(e.indexOf("."))}}catch(r){t=e}return t},T.sessionStorage={isSupport:function(){var e=!0,t="__hubbledatasupport__",r="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(t,r),sessionStorage.removeItem(t,r),e=!0):e=!1}catch(t){e=!1}return e}},T.loadScript=function(e){e=T.extend({success:function(){},error:function(){},appendCall:function(e){g.getElementsByTagName("head")[0].appendChild(e)}},e);var t=null;"css"===e.type&&((t=g.createElement("link")).rel="stylesheet",t.href=e.url),"js"===e.type&&((t=g.createElement("script")).async="async",t.setAttribute("charset","UTF-8"),t.src=e.url,t.type="text/javascript"),t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e.success(),t.onload=t.onreadystatechange=null)},t.onerror=function(){e.error(),t.onerror=null},e.appendCall(t)},T.ry=function(e){return new T.ry.init(e)},T.ry.init=function(e){this.ele=e},T.ry.init.prototype={addClass:function(e){return-1===(" "+this.ele.className+" ").indexOf(" "+e+" ")&&(this.ele.className=this.ele.className+(""===this.ele.className?"":" ")+e),this},removeClass:function(e){var t=" "+this.ele.className+" ";return-1!==t.indexOf(" "+e+" ")&&(this.ele.className=t.replace(" "+e+" "," ").slice(1,-1)),this},hasClass:function(e){return-1!==(" "+this.ele.className+" ").indexOf(" "+e+" ")},attr:function(e,t){return"string"==typeof e&&T.isUndefined(t)?this.ele.getAttribute(e):("string"==typeof e&&(t=String(t),this.ele.setAttribute(e,t)),this)},offset:function(){var e=this.ele.getBoundingClientRect();if(e.width||e.height){var t=this.ele.ownerDocument.documentElement;return{top:e.top+window.pageYOffset-t.clientTop,left:e.left+window.pageXOffset-t.clientLeft}}return{top:0,left:0}},getSize:function(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var e=this.ele.getBoundingClientRect();return{width:e.width,height:e.height}}catch(e){return{width:0,height:0}}},getStyle:function(e){return this.ele.currentStyle?this.ele.currentStyle[e]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(e)},wrap:function(e){var t=g.createElement(e);return this.ele.parentNode.insertBefore(t,this.ele),t.appendChild(this.ele),T.ry(t)},getCssStyle:function(e){var t=this.ele.style.getPropertyValue(e);if(t)return t;var r=null;if("function"==typeof window.getMatchedCSSRules&&(r=getMatchedCSSRules(this.ele)),!r||!T.isArray(r))return null;for(var n=r.length-1;n>=0;n--){if(t=r[n].style.getPropertyValue(e))return t}},sibling:function(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e},next:function(){return this.sibling(this.ele,"nextSibling")},prev:function(e){return this.sibling(this.ele,"previousSibling")},siblings:function(e){return this.siblings((this.ele.parentNode||{}).firstChild,this.ele)},children:function(e){return this.siblings(this.ele.firstChild)},parent:function(){var e=this.ele.parentNode;return e=e&&11!==e.nodeType?e:null,T.ry(e)}},T.addEvent=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation,t._getPath=e._getPath),t}e._getPath=function(){var e=this;return this.path||this.composedPath&&this.composedPath()||function(){try{var t=e.target,r=[t];if(null===t||null===t.parentElement)return[];for(;null!==t.parentElement;)t=t.parentElement,r.unshift(t);return r}catch(e){return[]}}()},e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0};var t=function(t,n,i){if(t&&t.addEventListener)t.addEventListener(n,(function(t){t._getPath=e._getPath,i.call(this,t)}),!1);else{var o="on"+n,a=t[o];t[o]=r(t,i,a)}};function r(t,r,n){return function(i){if(i=i||e(window.event)){i.target=i.srcElement;var o,a,s=!0;return"function"==typeof n&&(o=n(i)),a=r.call(t,i),!1!==o&&!1!==a||(s=!1),s}}}t.apply(null,arguments)},T.getEleInfo=function(e,t,r){if(!e.target||!t)return!1;var n=e.target,i=n.tagName.toLowerCase(),o={};o.type=i;var a="";return n.textContent?a=T.trim(n.textContent):n.innerText&&(a=T.trim(n.innerText)),a&&(a=a.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),o.text=a||"","input"===i&&("button"===n.type||"submit"===n.type||t&&"function"==typeof t.collect_input&&t.collect_input(n,r))&&(o.text=n.value||""),o=T.strip_empty_properties(o)},T.ajax={post:function(e,t,r,n){var i=this;i.callback=r||function(e){};try{var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/json"),o.withCredentials=!0,o.ontimeout=function(){i.callback({status:0,error:!0,message:"request "+e+" time out"})},o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)i.callback(T.JSONDecode(o.responseText));else{var e="Bad HTTP status: "+o.status+" "+o.statusText;i.callback({status:0,error:!0,message:e})}},o.timeout=n||5e3,o.send(T.JSONEncode(t))}catch(e){}},get:function(e,t){try{var r=new XMLHttpRequest;r.open("GET",e,!0),r.withCredentials=!0,r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)t&&t(T.JSONDecode(r.responseText));else if(t){var e="Bad HTTP status: "+r.status+" "+r.statusText;t({status:0,error:!0,message:e})}},r.send(null)}catch(e){}}},T.innerEvent={on:function(e,t){this._list||(this._list={}),this._list[e]||(this._list[e]=[]),this._list[e].push(t)},off:function(e){this._list||(this._list={}),this._list[e]&&delete this._list[e]},trigger:function(){var e=Array.prototype.slice.call(arguments),t=e[0],r=this._list&&this._list[t];if(r&&0!==r.length)for(var n=0;n<r.length;n++)"function"==typeof r[n]&&r[n].apply(this,e)}},T.toArray=T.toArray,T.isObject=T.isObject,T.JSONEncode=T.JSONEncode,T.JSONDecode=T.JSONDecode,T.isBlockedUA=T.isBlockedUA,T.isEmptyObject=T.isEmptyObject,T.info=T.info,T.info.properties=T.info.properties,T.sessionStorage=T.sessionStorage,T.sessionStorage.isSupport=T.sessionStorage.isSupport,T.loadScript=T.loadScript,T.ry=T.ry,T.addEvent=T.addEvent,T.getEleInfo=T.getEleInfo,T.ajax=T.ajax;var ie={data:{campaign:{utm_source:"",utm_medium:"",utm_campaign:"",utm_content:"",utm_term:"",promotional_id:""},isCampaign:!1,isAdClick:!1,campaignParamsSaved:!1,APPKEY:""},init:function(e,t){void 0!==e&&(this.data.APPKEY=e,this.DATracker=t,this.checkCampaign(),this.checkAdClick(),this.setParams(),this.data.isCampaign&&this.save())},campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term promotional_id".split(" "),t="",r={};return T.each(e,(function(e){(t=T.getQueryParam(document.URL,e)).length&&(r[e]=t)})),r},setParams:function(){var e={};if(this.data.isCampaign)e=this.campaignParams();else{var t=T.cookie.get("hb_"+this.data.APPKEY+"_u");t&&(e=T.JSONDecode(t))}this.data.campaign=T.extend(this.data.campaign,e)},getParams:function(){return this.setParams(),this.changeParams()},checkCampaign:function(){var e=this.campaignParams();void 0!==e.utm_source&&void 0!==e.utm_medium&&void 0!==e.utm_campaign&&(this.data.isCampaign=!0)},checkAdClick:function(){var e=T.getQueryParam(document.URL,"t_rs");this.data.isCampaign&&document.referrer&&!e&&(this.data.isAdClick=!0)},save:function(){this.data.campaignParamsSaved||(T.cookie.set("hb_"+this.data.APPKEY+"_u",T.JSONEncode(this.data.campaign),30,this.DATracker.get_config("cross_subdomain_cookie")),this.data.campaignParamsSaved=!0)},changeParams:function(){var e=this.data.campaign,t={utmSource:e.utm_source,utmMedium:e.utm_medium,promotionalID:e.promotional_id,utmCampaign:e.utm_campaign,utmContent:e.utm_content,utmTerm:e.utm_term};return t.utmSource||delete t.utmSource,t.utmMedium||delete t.utmMedium,t.promotionalID||delete t.promotionalID,t.utmCampaign||delete t.utmCampaign,t.utmContent||delete t.utmContent,t.utmTerm||delete t.utmTerm,t}};function oe(e,t,r){if(e[t]){var n=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);r.apply(this,e),n.apply(this,e)}}else e[t]=function(){var e=Array.prototype.slice.call(arguments);r.apply(this,e)}}function ae(){return location.pathname+location.search}var se={config:{mode:"hash",track_replace_state:!1,callback_fn:function(){}},init:function(e){this.config=T.extend(this.config,e||{}),this.path=ae(),this.event()},event:function(){if("history"===this.config.mode){if(!history.pushState||!window.addEventListener)return;oe(history,"pushState",T.bind(this.pushStateOverride,this)),oe(history,"replaceState",T.bind(this.replaceStateOverride,this)),window.addEventListener("popstate",T.bind(this.handlePopState,this))}else"hash"===this.config.mode&&T.register_hash_event(T.bind(this.handleHashState,this))},pushStateOverride:function(){this.handleUrlChange(!0)},replaceStateOverride:function(){this.handleUrlChange(!1)},handlePopState:function(){this.handleUrlChange(!0)},handleHashState:function(){this.handleUrlChange(!0)},handleUrlChange:function(e){var t=this;setTimeout((function(){if("hash"===t.config.mode)"function"==typeof t.config.callback_fn&&t.config.callback_fn.call();else if("history"===t.config.mode){var r=t.path,n=ae();r!=n&&t.shouldTrackUrlChange(n,r)&&(t.path=n,(e||t.config.track_replace_state)&&"function"==typeof t.config.callback_fn&&t.config.callback_fn.call())}}),0)},shouldTrackUrlChange:function(e,t){return!(!e||!t)}},ce={data:{secondLevelSource:"",outsideReferer:!1,APPKEY:""},init:function(e){void 0!==e&&(this.data.APPKEY=e,this.checkReferer(),this.setParams(),this.save())},checkReferer:function(){document.referrer&&T.get_host(document.referrer)!=window.location.host&&(this.data.outsideReferer=!0)},setParams:function(){var e=T.cookie.get("hb_"+this.data.APPKEY+"_source");e||(e=""),this.data.outsideReferer&&(e=T.get_host(document.referrer)),this.data.secondLevelSource=e},save:function(){this.data.outsideReferer&&T.cookie.set("hb_"+this.data.APPKEY+"_source",this.data.secondLevelSource,30,!0)},getParams:function(){return{secondLevelSource:this.data.secondLevelSource}}},ue={lastTrackTime:0,getDomIndex:function(e){var t=[].indexOf;if(!e.parentNode)return-1;var r=e.parentNode.children;if(!r)return-1;var n=r.length;if(t)return t.call(r,e);for(var i=0;i<n;++i)if(e==r[i])return i;return-1},selector:function(e){var t=e.parentNode&&9==e.parentNode.nodeType?-1:this.getDomIndex(e);return e.id?"#"+e.id:e.tagName.toLowerCase()+(~t?":nth-child("+(t+1)+")":"")},getDomSelector:function(e,t){if(!e||!e.parentNode||!e.parentNode.children)return!1;t=t&&t.join?t:[];var r=e.nodeName.toLowerCase();return e&&"body"!==r&&1==e.nodeType?(t.unshift(this.selector(e)),e.id?t.join(" > "):this.getDomSelector(e.parentNode,t)):(t.unshift("body"),t.join(" > "))},getDomWidth:function(e){return e.scrollWidth},getDomHeight:function(e){return e.scrollHeight},hasParentA:function(e){try{for(;"body"!=e.nodeName.toLowerCase();){if("a"==e.nodeName.toLowerCase())return e;e=e.parentNode}}catch(e){return!1}return!1},getScrollLeft:function(){var e=0;try{e=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getScrollTop:function(){var e=0;try{e=document.documentElement.scrollTop||document.body.scrollTop||m.pageYOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getBoundingClientRect:function(e){var t=this.getScrollTop(),r=this.getScrollLeft();if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return{left:n.left,right:n.right,top:n.top,bottom:n.bottom}}var i=this.getElementLeft(e),o=this.getElementTop(e);return{left:i-r,right:i+offsetWidth-r,top:o-t,bottom:o+offsetHeight-t}},getElementLeft:function(e){for(var t=e.offsetLeft,r=e.offsetParent;null!==r;)t+=r.offsetLeft,r=r.offsetParent;return t},getElementTop:function(e){for(var t=e.offsetTop,r=e.offsetParent;null!==r;)t+=r.offsetTop,r=r.offsetParent;return t},getMousePosion:function(e){var t=parseInt(+e.clientX+this.getScrollLeft(),10),r=parseInt(+e.clientY+this.getScrollTop(),10);return{left:isNaN(t)?0:t,top:isNaN(r)?0:r}},getDomPosition:function(e){var t=this.getBoundingClientRect(e);return t.top+=this.getScrollTop(),t.left+=this.getScrollLeft(),{top:Math.round(t.top),left:Math.round(t.left)}},getBrowserWidth:function(){var e=window.innerWidth||document.body.clientWidth;return isNaN(e)?0:parseInt(e,10)},getBrowserHeight:function(){var e=window.innerHeight||document.body.clientHeight;return isNaN(e)?0:parseInt(e,10)},getScrollWidth:function(){var e=parseInt(document.body.scrollWidth,10);return isNaN(e)?0:e},start:function(e,t,r,n){var i,o=this.DATracker.config.heatmap,a=!1;if(o&&o.collect_element&&!o.collect_element(t,this))return!1;if(o&&o.set_collect_element_path&&T.isFunction(o.set_collect_element_path)&&(a=!0),a){if(!(i=o.set_collect_element_path(t,this)))return x("无元素path"),!1}else i=this.getDomSelector(t);var s,c=T.getEleInfo({target:t},o,this);if(c.path=i||"",o&&o.custom_property){var u=o.custom_property(t);T.isObject(u)&&(c=T.extend(c,u))}if(e){var l=this.getMousePosion(e),p=this.getDomPosition(t);c.stat=c.path+","+(l.left-p.left)+","+(l.top-p.top)+","+this.getDomWidth(t)+","+this.getDomHeight(t)}if(("a"===t.tagName.toLowerCase()||n)&&o&&!0===o.isTrackLink)s=T.sha1(c.path),c.path=r?"":c.path,this.trackLink({event:e,target:t,parentIsA:n},s,c);else if(c.path)try{s=T.sha1(c.path),c.path=r?"":c.path,this.DATracker.track(s,c,void 0,"auto")}catch(e){}},trackLink:function(e,t,r){var n=null,i=this;if((e=e||{}).ele&&(n=e.ele),e.event&&(n=e.target?e.target:e.event.target),r=r||{},!n||"object"!==_typeof(n))return!1;if(e.parentIsA&&(n=e.parentIsA),!n.href||/^javascript/.test(n.href)||"_blank"==n.target||n.download||n.onclick)return i.DATracker.track(t,r,void 0,"auto"),!1;e.event&&function(e){e.stopPropagation(),e.preventDefault();var o=!1;function a(){o||(o=!0,location.href=n.href)}setTimeout(a,1e3),i.DATracker.track(t,r,a,"auto")}(e.event)},hasElement:function(e){var t=e._getPath();if(T.isArray(t)&&t.length>0)for(var r=0;r<t.length;r++)if(t[r]&&t[r].tagName&&"a"===t[r].tagName.toLowerCase())return t[r];return!1},trackHeatmap:function(e){if("object"===_typeof(e)&&e.tagName){var t=e.tagName.toLowerCase(),r=e.parentNode.tagName.toLowerCase();"button"!==t&&"a"!==t&&"a"!==r&&"button"!==r&&"input"!==t&&"textarea"!==t&&this.start(null,e,!0)}},initHeatmap:function(){var e=this,t=e.DATracker.config.heatmap;return!(!T.isObject(t)||"default"!==t.clickmap)&&(!(T.isFunction(t.collect_url)&&!t.collect_url())&&void T.addEvent(document,"click",(function(r){var n=r||window.event;if(!n)return!1;var i=n.target||n.srcElement;if("object"!==_typeof(i))return!1;if("string"!=typeof i.tagName)return!1;var o=i.tagName.toLowerCase();if("body"===o.toLowerCase()||"html"===o.toLowerCase())return!1;if(!i||!i.parentNode||!i.parentNode.children)return!1;var a=i.parentNode,s=e.hasParentA(i);if(s)e.start(n,i,"",s);else if(["button","input","textarea"].indexOf(o)>-1)e.start(n,i,"");else if("button"===a.tagName.toLowerCase()||"a"===a.tagName.toLowerCase())e.start(n,a);else if("area"===o&&"map"===a.tagName.toLowerCase()&&T.ry(a).prev().tagName&&"img"===T.ry(a).prev().tagName.toLowerCase())e.start(n,T.ry(a).prev());else if(t.collect_all){var c=new Date;(c-e.lastTrackTime)/1e3>=.5&&(e.lastTrackTime=c-0,e.start(n,i,i.children.length>0))}})))},prepare:function(e){var t=location.href.match(/hubble_heatmap_id=([^&#]+)/),r=this,n=r.DATracker.config.heatmap_url,i=r.DATracker.config.heatmap;function o(e){n?T.loadScript({success:function(){},error:function(){},type:"js",url:n+"?_="+Math.random()}):x("没有指定heatmap_url的路径")}T.isObject(i)&&i.loadTimeout,t&&t[0]&&t[1]?(r.DATracker.set_config({hubble_render_mode:!0}),T.sessionStorage.isSupport()&&sessionStorage.setItem("hubble_heatmap_id",t[1]),o(t[1])):T.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("hubble_heatmap_id")?(r.DATracker.set_config({hubble_render_mode:!0}),o(sessionStorage.getItem("hubble_heatmap_id"))):(e(),T.isObject(i)&&(r.initHeatmap(),r.DATracker.track_heatmap=T.bind(r.trackHeatmap,r)))},init:function(e,t){e&&t&&(this.DATracker=e,this.DATracker.heatmap=this,this.DATracker.track_heatmap=function(){},this.prepare(t))}};function le(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function pe(e,t,r,n,i,o){return le((a=le(le(t,e),le(n,o)))<<(s=i)|a>>>32-s,r);var a,s}function de(e,t,r,n,i,o,a){return pe(t&r|~t&n,e,t,i,o,a)}function fe(e,t,r,n,i,o,a){return pe(t&n|r&~n,e,t,i,o,a)}function _e(e,t,r,n,i,o,a){return pe(t^r^n,e,t,i,o,a)}function he(e,t,r,n,i,o,a){return pe(r^(t|~n),e,t,i,o,a)}function ge(e,t){var r,n,i,o,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,c=-271733879,u=-1732584194,l=271733878;for(r=0;r<e.length;r+=16)n=s,i=c,o=u,a=l,s=de(s,c,u,l,e[r],7,-680876936),l=de(l,s,c,u,e[r+1],12,-389564586),u=de(u,l,s,c,e[r+2],17,606105819),c=de(c,u,l,s,e[r+3],22,-1044525330),s=de(s,c,u,l,e[r+4],7,-176418897),l=de(l,s,c,u,e[r+5],12,1200080426),u=de(u,l,s,c,e[r+6],17,-1473231341),c=de(c,u,l,s,e[r+7],22,-45705983),s=de(s,c,u,l,e[r+8],7,1770035416),l=de(l,s,c,u,e[r+9],12,-1958414417),u=de(u,l,s,c,e[r+10],17,-42063),c=de(c,u,l,s,e[r+11],22,-1990404162),s=de(s,c,u,l,e[r+12],7,1804603682),l=de(l,s,c,u,e[r+13],12,-40341101),u=de(u,l,s,c,e[r+14],17,-1502002290),s=fe(s,c=de(c,u,l,s,e[r+15],22,1236535329),u,l,e[r+1],5,-165796510),l=fe(l,s,c,u,e[r+6],9,-1069501632),u=fe(u,l,s,c,e[r+11],14,643717713),c=fe(c,u,l,s,e[r],20,-373897302),s=fe(s,c,u,l,e[r+5],5,-701558691),l=fe(l,s,c,u,e[r+10],9,38016083),u=fe(u,l,s,c,e[r+15],14,-660478335),c=fe(c,u,l,s,e[r+4],20,-405537848),s=fe(s,c,u,l,e[r+9],5,568446438),l=fe(l,s,c,u,e[r+14],9,-1019803690),u=fe(u,l,s,c,e[r+3],14,-187363961),c=fe(c,u,l,s,e[r+8],20,1163531501),s=fe(s,c,u,l,e[r+13],5,-1444681467),l=fe(l,s,c,u,e[r+2],9,-51403784),u=fe(u,l,s,c,e[r+7],14,1735328473),s=_e(s,c=fe(c,u,l,s,e[r+12],20,-1926607734),u,l,e[r+5],4,-378558),l=_e(l,s,c,u,e[r+8],11,-2022574463),u=_e(u,l,s,c,e[r+11],16,1839030562),c=_e(c,u,l,s,e[r+14],23,-35309556),s=_e(s,c,u,l,e[r+1],4,-1530992060),l=_e(l,s,c,u,e[r+4],11,1272893353),u=_e(u,l,s,c,e[r+7],16,-155497632),c=_e(c,u,l,s,e[r+10],23,-1094730640),s=_e(s,c,u,l,e[r+13],4,681279174),l=_e(l,s,c,u,e[r],11,-358537222),u=_e(u,l,s,c,e[r+3],16,-722521979),c=_e(c,u,l,s,e[r+6],23,76029189),s=_e(s,c,u,l,e[r+9],4,-640364487),l=_e(l,s,c,u,e[r+12],11,-421815835),u=_e(u,l,s,c,e[r+15],16,530742520),s=he(s,c=_e(c,u,l,s,e[r+2],23,-995338651),u,l,e[r],6,-198630844),l=he(l,s,c,u,e[r+7],10,1126891415),u=he(u,l,s,c,e[r+14],15,-1416354905),c=he(c,u,l,s,e[r+5],21,-57434055),s=he(s,c,u,l,e[r+12],6,1700485571),l=he(l,s,c,u,e[r+3],10,-1894986606),u=he(u,l,s,c,e[r+10],15,-1051523),c=he(c,u,l,s,e[r+1],21,-2054922799),s=he(s,c,u,l,e[r+8],6,1873313359),l=he(l,s,c,u,e[r+15],10,-30611744),u=he(u,l,s,c,e[r+6],15,-1560198380),c=he(c,u,l,s,e[r+13],21,1309151649),s=he(s,c,u,l,e[r+4],6,-145523070),l=he(l,s,c,u,e[r+11],10,-1120210379),u=he(u,l,s,c,e[r+2],15,718787259),c=he(c,u,l,s,e[r+9],21,-343485551),s=le(s,n),c=le(c,i),u=le(u,o),l=le(l,a);return[s,c,u,l]}function be(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function me(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function ve(e){var t,r,n="0123456789abcdef",i="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function ye(e){return unescape(encodeURIComponent(e))}function ke(e){return function(e){return be(ge(me(e),8*e.length))}(ye(e))}function we(e,t){return function(e,t){var r,n,i=me(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=ge(i,8*e.length)),r=0;r<16;r+=1)o[r]=909522486^i[r],a[r]=1549556828^i[r];return n=ge(o.concat(me(t)),512+8*t.length),be(ge(a.concat(n),640))}(ye(e),ye(t))}function Te(e,t,r){return t?r?we(t,e):ve(we(t,e)):r?ke(e):ve(ke(e))}var Se,xe,Ae=function(e){return e=e.substring(8,24)},De={_queue:[],_callbackList:[],_loadControlComplete:!1,init:function(e){if(e){var t=this;t.DATracker=e;var r=t.DATracker.get_config("abtest")||{};t._control=null,t._isTestDebug()&&(r.interval_mins_abtest=0,t.DATracker.set_config({abtest:r}),t._loadControlJs(),r.enable_abtest?t._prepare((function(){"function"==typeof hubbleData_render_mode_fn&&(t._control=new hubbleData_render_mode_fn(t.DATracker,{type:"abtest_debug",data:{hubble_abtest_debug_key:t.getDebugKeyData()}}).control,T.each(t._queue,(function(e){t.debugTrack(e)})),t._queue=[])})):t._prepare((function(){"function"==typeof hubbleData_render_mode_fn&&new hubbleData_render_mode_fn(t.DATracker,{type:"abtest_debug_but_abtest_disable"})})))}},_isTestDebug:function(){var e=location.href.match(/hubble_abtest_debug_key=([^&#]+)/),t=!1;return e&&e[0]&&e[1]?(t=!0,T.sessionStorage.isSupport()&&sessionStorage.setItem("hubble_abtest_debug_key",e[1])):T.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("hubble_abtest_debug_key")&&sessionStorage.getItem("hubble_abtest_debug_key")&&(t=!0),t},_loadControlJs:function(){var e=this,t=e.DATracker.config.control_js_url;t?T.loadScript({success:function(){e._loadControlComplete=!0,T.each(e._callbackList,(function(t){t.call(e)})),e._callbackList=[]},error:function(){},type:"js",url:t+"?_="+Math.random()}):x("没有指定control_js_url的路径")},_prepare:function(e){this._loadControlComplete||e&&this._callbackList.push(e),e&&e.call(this)},getDebugKeyData:function(){var e=location.href.match(/hubble_abtest_debug_key=([^&#]+)/),t="";return e&&e[0]&&e[1]?t=e[1]:T.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("hubble_abtest_debug_key")&&(t=sessionStorage.getItem("hubble_abtest_debug_key")),t},debugTrack:function(e){try{this._control?this._control.addEvent(e):this._queue.push(e)}catch(e){x(e)}},debugNoData:function(){var e=this;e._isTestDebug()&&e._prepare((function(){"function"==typeof hubbleData_render_mode_fn&&new hubbleData_render_mode_fn(e.DATracker,{type:"abtest_debug_abtest_no_data"})}))}},Ne={multilinkArr:[],isTestDebug:De._isTestDebug,setMultilinkArr:function(e){this.multilinkArr=e||[]},jump:function(e,t){e=e||this.getVariable();var r=this.getNowUrl(),n=!0,i=this.getNowProtocolDommainAndPath();e?(1==e.type&&(i!==e.url&&i+"/"!==e.url||(n=!1)),e.url!==r&&e.url!==r+"/"&&n?(this.isTestDebug()&&(e.url+=e.url.indexOf("?")>-1?"&":"?",e.url=e.url+"hubble_abtest_debug_key="+De.getDebugKeyData()),window.location.href=e.url):t&&t()):t&&t()},getNowUrl:function(){var e,t=window.location.href;return this.isTestDebug()&&(t.indexOf("?hubble_abtest_debug_key=")>-1?e=t.match(/\?hubble_abtest_debug_key=([^&#]+)/):t.indexOf("&hubble_abtest_debug_key=")>-1&&(e=t.match(/\&hubble_abtest_debug_key=([^&#]+)/)),e&&e[0]&&(t=t.replace(e[0],""))),t},getNowProtocolDommainAndPath:function(){return("https:"==document.location.protocol?"https://":"http://")+T.info.referringDomain(window.location.href)+window.location.pathname},getVariable:function(){for(var e=this.getNowProtocolDommainAndPath(),t=this.getNowUrl(),r=Ae(Te(e)),n=Ae(Te(e+"/")),i=Ae(Te(t)),o=Ae(Te(t+"/")),a=[],s=[],c=0;c<this.multilinkArr.length;c++){var u=this.multilinkArr[c][0].replace(new RegExp("^\\$","g"),"");t!==e&&(u===i||u===o)?a.push({variable:this.multilinkArr[c][0],url:this.multilinkArr[c][1],type:0,key:u===i?t:t+"/"}):u!==r&&u!==n||s.push({variable:this.multilinkArr[c][0],url:this.multilinkArr[c][1],type:1,key:u===r?e:e+"/"})}return a.length?a[0]:s.length?s[0]:null}},Oe={_visualizationArr:[],_settimeNum:0,_loadControlJs:function(e){var t=this.DATracker.config.control_js_url;t?T.loadScript({success:function(){"function"==typeof e&&e()},error:function(){},type:"js",url:t+"?_="+Math.random()}):x("没有指定control_js_url的路径")},isEditor:function(){var e=location.href.match(/hubble_abtest_editor_key=([^&#]+)/),t=!1;return e&&e[0]&&e[1]&&(t=!0),t},_querySelector:function(e,t){try{return(t||document).querySelector(e)}catch(e){return null}},_getNowUrl:function(){var e,t=window.location.href;return this.isTestDebug()&&(t.indexOf("?hubble_abtest_debug_key=")>-1?e=t.match(/\?hubble_abtest_debug_key=([^&#]+)/):t.indexOf("&hubble_abtest_debug_key=")>-1&&(e=t.match(/\&hubble_abtest_debug_key=([^&#]+)/)),e&&e[0]&&(t=t.replace(e[0],""))),t},_setType:function(){S(this._visualizationArr);try{for(var e=0;e<this._visualizationArr.length;e+=1)if(this._visualizationArr[e][1])if(this._visualizationArr[e][1]=T.JSONDecode(this._visualizationArr[e][1]),this._visualizationArr[e][1].pattern){try{this._visualizationArr[e][1].pattern=T.JSONDecode(this._visualizationArr[e][1].pattern)}catch(e){x(e)}this._visualizationArr[e][2]=0}else this._visualizationArr[e][2]=1;else this._visualizationArr[e][2]=1}catch(e){x(e)}},_filtrateElementItem:function(e,t){var r=!0;return e.nodeName!==t.nodeName.toLocaleUpperCase()&&(r=!1),r},_resetConfig:function(e){var t=[];return T.each(e,(function(e,r){var n=e.variations;T.each(n,(function(e,r){t.push(e)}))})),t},init:function(e,t){if(e){var r=this;if(r.DATracker=e,r.ABTEST=t,this.isEditor()){var n=r.DATracker.get_config("abtest")||{};r._loadControlJs((function(){if("function"==typeof hubbleData_render_mode_fn){n.enable_abtest?new hubbleData_render_mode_fn(r.DATracker,{type:"abtest_editor"}):new hubbleData_render_mode_fn(r.DATracker,{type:"abtest_editor_but_abtest_disable"});try{r.ABTEST._showPage()}catch(e){}}}))}}},isTestDebug:De._isTestDebug,setVisualizationArr:function(e){this._visualizationArr=e||[],this._setType()},_hidePathStyleSet:function(e){var t="";T.each(e,(function(e){t+=e.selector+"{opacity:0 !important;}"}));var r=document.getElementById("_hb_abtesting_path_hides");if(r)r.styleSheet?r.styleSheet.cssText=t:(r.innerText="",r.appendChild(document.createTextNode(t)));else{var n=document.createElement("style"),i=document.getElementsByTagName("head")[0];n.setAttribute("id","_hb_abtesting_path_hides"),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=t:(n.innerText="",n.appendChild(document.createTextNode(t))),i.appendChild(n)}},render:function(e){if(e){var t=this;clearTimeout(t._settimeNum);var r=this._resetConfig(e),n=[],i=function(e,t){T.each(t.css,(function(t,r){e.style[r]=t})),T.each(t.attributes,(function(t,r){e.setAttribute(r,t)})),T.each(t,(function(t,r){T.include(["css","attributes","nodeName","selector"],r)||(e[r]=t)}))};try{for(var o=0;o<r.length;o+=1)if(r[o].selector){var a=this._querySelector(r[o].selector),s=r[o];a?this._filtrateElementItem(s,a)&&i(a,s):n.push(r[o])}}catch(e){x(e)}!function e(){var r=0,o=[];t._hidePathStyleSet(n);for(var a=0;a<n.length;a+=1){if(n[a].selector){var s=t._querySelector(n[a].selector),c=n[a];s?t._filtrateElementItem(c,s)&&i(s,c):o.push(n[a])}r++}n=o,r>0?t._settimeNum=setTimeout((function(){e()}),0):clearTimeout(t._settimeNum),t._hidePathStyleSet(n)}()}},getVariables:function(){for(var e=this,t=[],r=function(t){var r=!1;if(!t)return r;var n=e._getNowUrl(),i=Ae(Te(n+"/")),o=Ae(Te(n)),a=t[0].replace(new RegExp("^\\%","g"),"");return a!==o&&a!==i||(r=!0),r},n=function(t){var r=!1;if(!t)return r;var n=t[1].pattern;if(n){var i=n.conditions;if("OR"===n.relation||""===n.relation)for(var o=0;o<i.length;o+=1){var a=i[o]||{},s=a.field,c=a.func,u=a.params,l=e._getNowUrl();if("URL"===s){if("EQUAL"===c&&(T.include(u,l)||T.include(u,l+"/"))){r=!0;break}if("CONTAIN"===c&&(l.indexOf(u[0])>-1||(l+"/").indexOf(u[0])>-1)){r=!0;break}if("REG_MATCH"===c)try{var p=(0,eval)(u[0]);if(p.test(l)||p.test(l+"/")){r=!0;break}}catch(e){x(e)}}}}return r},i=0;i<e._visualizationArr.length;i+=1){var o=e._visualizationArr[i][2],a=!1;1===o?a=r(e._visualizationArr[i]):0===o&&(a=n(e._visualizationArr[i])),a&&t.push({variations:e._visualizationArr[i][1].variations||[],type:2,variable:e._visualizationArr[i][0]})}return t}},Ce={data:{experiments:[],variables:{}},abtest_config:{enable_abtest:!1,interval_mins_abtest:0,default_variables:{},url:"",multilinkTimeOutMs:300,timeoutMs:500,hasCacheRender:!1},_default_variables:{},_getVariableInfoComplete:!1,_queue:[],_showPage:function(){"undefined"!=typeof DATrackerABTestingLeadCode&&DATrackerABTestingLeadCode&&DATrackerABTestingLeadCode.showPage&&DATrackerABTestingLeadCode.showPage()},init:function(e){if(!e)return null;this.DATracker=e,De.init(this.DATracker),Oe.init(this.DATracker,this),this.localStorageName="hb_"+this.DATracker.get_config("token")+"_abtest";var t=Oe.isEditor(),r=this,n=function(){try{var e=r.DATracker.get_config("abtest")||{};if(r._default_variables=e.default_variables||{},r.abtest_config=T.deepMerge(r.abtest_config,e),r.abtest_config.enable_abtest)if(r.data.variables=r.abtest_config.default_variables,t)r._getVariableInfoComplete=!0;else if(r._checkUpdateTime())r.async_get_variable();else{var n=r._getLocalStorageData();r.data=n.data,r._getVariableInfoComplete=!0,r._dataClass()}}catch(e){t?(r._getVariableInfoComplete=!0,r._showPage()):r.async_get_variable()}};n(),T.innerEvent.on("singlePage:change",(function(){n()})),r.abtest_config.enable_abtest&&(r.isTestDebug()||T.innerEvent.on("userId:change",(function(e,t){if("login"===t.type){var n=!0;t.userId!==r._getUserId()&&(r._clearLocalData(),r.data.variables=r.abtest_config.default_variables,n=!1),r.async_get_variable(t.userId,n)}else"logout"===t.type&&(r._clearLocalData(),r.data.variables=r.abtest_config.default_variables,r.async_get_variable(t.userId))})))},debugTrack:function(e){De.debugTrack(e)},_dataClass:function(){if(!this._getVariableInfoComplete)return!1;var e=this,t=e.data.variables,r=[],n=[];for(var i in t)t.hasOwnProperty(i)&&(3===e._getExperimentType(i)&&r.push([i,t[i]]),2===e._getExperimentType(i)&&n.push([i,t[i]]));Ne.setMultilinkArr(r),Oe.setVisualizationArr(n);var o=Ne.getVariable(),a=Oe.getVariables();if(o){e.get_variation((function(t){try{var r=function(){Ne.jump(o,e._showPage)};setTimeout(r,t.abtest_config.multilinkTimeOutMs),t.get(o.variable,window.location.href,r,{variableObj:o})}catch(t){e._showPage(),x(t)}}))}else{if(a.length){e.get_variation((function(e){try{Oe.render(a);for(var t=0;t<a.length;t+=1){var r=a[t];e.get(r.variable,{},(function(){}),{variableObj:r})}}catch(e){x(e)}}))}e._showPage()}},isTestDebug:function(){return De._isTestDebug()},isEditor:function(){return Oe.isEditor()},getDebugKeyData:function(){return De.getDebugKeyData()},_saveLocal:function(){var e={data:this.data};try{T.localStorage.set(this.localStorageName,JSON.stringify(e))}catch(e){}},_clearLocalData:function(){this.data={experiments:[],variables:{},updatedTime:0},this._saveLocal()},_getLocalStorageData:function(){var e;try{e=JSON.parse(T.localStorage.get(this.localStorageName))}catch(t){e=null}return e},_checkUpdateTime:function(){var e=!0;try{var t=this.abtest_config.interval_mins_abtest,r=this._getLocalStorageData().data.updatedTime/1e3;1*(new Date).getTime()/1e3<=r+60*t&&(e=!1)}catch(t){e=!0}return e},_getExperimentType:function(e){var t=1;try{0===e.indexOf("$")&&(t=3),0===e.indexOf("%")&&(t=2)}catch(e){x(e)}return t},_variableToFindExperiment:function(e){for(var t,r={$experimentId:[],$versionId:[],$experimentType:this._getExperimentType(e)},n=0;n<this.data.experiments.length;n++){var i=this.data.experiments[n].experimentId,o=this.data.experiments[n].versionId,a=this.data.experiments[n].variables;T.include(a,e)&&(T.include(r.$experimentId,i)||r.$experimentId.push(i),T.include(r.$versionId,o)||r.$versionId.push(o))}return r.$experimentId=r.$experimentId.join(","),r.$versionId=r.$versionId.join(","),3===r.$experimentType?(t=Ne.getVariable())&&(r.$source=t.key,r.$target=t.url):2===r.$experimentType||(r[e]=this.data.variables[e]),r},_track_abtest:function(e,t){e&&this.DATracker.track("da_abtest",e,t||function(){})},_getUserId:function(){var e=this.DATracker.get_user_id()||0;return this.isTestDebug()&&(e=this.getDebugKeyData()),e},get:function(e,t,r,n){try{if(void 0!==this.data.variables[e]){var i=this._variableToFindExperiment(e)||{};return i.$experimentId&&i.$versionId&&i.$experimentType?this._track_abtest(i,r):"function"==typeof r&&r(),this.data.variables[e]}return t}catch(e){return t}},get_variation:function(e){if(!this._getVariableInfoComplete)return this._queue.push(arguments),!1;"function"==typeof e&&e(this)},async_get_variable:function(e,t){if(this.isEditor())this._getVariableInfoComplete=!0;else try{var r=this.abtest_config;if(r.enable_abtest){var n=this,i=e||n._getUserId(),o=n.DATracker.get_config("token");n._getVariableInfoComplete=!1;var a=n.DATracker.get_config("api_host")+"/cc/a_exp",s=500;try{s=n.abtest_config.timeoutMs}catch(e){s=500}r.url&&(a=r.url);var c=T.extend({},T.info.properties(),n.DATracker.persistence.properties());T.ajax.post(a,{userId:i,appKey:o,property:{deviceOs:c.deviceOs,deviceOsVersion:c.deviceOsVersion,screenWidth:c.screen_width,screenHeight:c.screen_height,devicePlatform:c.hb_lib,pageOpenScene:n.DATracker.pageOpenScene}},T.bind((function(e){if(this._getVariableInfoComplete=!0,e.error)this.isTestDebug()?De.debugNoData():(t||(this._clearLocalData(),this.data.variables=this.abtest_config.default_variables),this._dataClass());else if(200===e.code){var r=T.JSONDecode(T.JSONEncode(this._default_variables));this.data.experiments=e.data.experiments,this.data.variables=T.deepMerge(r,e.data.variables),this.data.updatedTime=(new Date).getTime(),this._saveLocal(),this._dataClass(),this.isTestDebug()&&(e.data.experiments.length||De.debugNoData())}else t||(this._clearLocalData(),this.data.variables=this.abtest_config.default_variables),this._dataClass();this._queue.length&&(T.each(n._queue,(function(e){n.get_variation.apply(n,Array.prototype.slice.call(e))})),n._queue=[])}),n),s)}}catch(e){}},is_abtest_debug:De._isTestDebug,get_hubble_abtest_debug_key_str:function(){var e="";return De._isTestDebug()&&(e="hubble_abtest_debug_key="+De.getDebugKeyData()),e},hasLocalCache:function(){return!this._checkUpdateTime()}},Pe="js",Ee="DATracker",Ie="__mps",je="__mpso",Le="__mpa",Ue="__mpap",qe="__mpu",ze="attributes",Re="attributes",Be="attributes",Ve="attributes",$e="$union",He="costTime",Me=[Ie,je,Le,Ue,qe,"$people_distinct_id",He],Je=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Fe=!Je&&-1===O.indexOf("MSIE")&&-1===O.indexOf("Mozilla"),Ke={distribution_interface:"https://yaolu.yuedu.163.com/statistics/log/h5/upload.json",distribution_get_interface:"https://yaolu.yuedu.163.com/statistics/log/track/w/",distribution_api_host:"https://yaolu.yuedu.163.com/statistics/log",api_host:"https://hubble.netease.com",app_host:"https://hubble.netease.com",autotrack:!1,cdn:"https://hubble.netease.com",cross_subdomain_cookie:!0,persistence:"cookie",persistence_name:"",cookie_name:"",loaded:function(){},store_google:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:!1,track_links_timeout:300,cookie_expiration:730,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,property_blacklist:[],session_interval_mins:30,is_single_page:!1,single_page_config:{mode:"hash",track_replace_state:!1},pageview:!0,use_app_track:!1,hubble_render_mode:!1,heatmap_url:"https://hubble.netease.com/track/w/heatmap/heatmap.js",heatmap_getdata_host:"https://hubble.netease.com",send_error:!1,control_js_url:"https://hubble.netease.com/track/w/control/control.js",visualization_editor_js_url:"https://hubble.netease.com/track/w/visualization/visualization.js",truncateLength:-1},We={da_session_start:{dataType:"ie"},da_session_close:{dataType:"ie"},da_u_login:{dataType:"ie"},da_u_logout:{dataType:"ie"},da_u_signup:{dataType:"ie"},da_user_profile:{dataType:"ie"},da_screen:{dataType:"pv"},da_ad_click:{dataType:"ie"},da_activate:{dataType:"ie"},da_abtest:{dataType:"ie"},da_send_error:{dataType:"ie"}},Ge=!1,Ye=function(){};Ye.prototype.create_properties=function(){},Ye.prototype.event_handler=function(){},Ye.prototype.after_track_handler=function(){},Ye.prototype.init=function(e){return this.mp=e,this},Ye.prototype.track=function(e,t,r,n){var i=this,o=T.dom_query(e);if(0!==o.length)return T.each(o,(function(e){T.register_event(e,this.override_event,(function(e){var o={},a=i.create_properties(r,this),s=i.mp.get_config("track_links_timeout");i.event_handler(e,this,o),window.setTimeout(i.track_callback(n,a,o,!0),s),i.mp.track(t,a,i.track_callback(n,a,o))}))}),this),!0;x("The DOM query ("+e+") returned 0 elements")},Ye.prototype.track_callback=function(e,t,r,n){n=n||!1;var i=this;return function(){r.callback_fired||(r.callback_fired=!0,e&&!1===e(n,t)||i.after_track_handler(t,r,n))}},Ye.prototype.create_properties=function(e,t){return"function"==typeof e?e(t):T.extend({},e)};var Xe=function(){this.override_event="click"};T.inherit(Xe,Ye),Xe.prototype.create_properties=function(e,t){var r=Xe.superclass.create_properties.apply(this,arguments);return t.href&&(r.url=t.href),r},Xe.prototype.event_handler=function(e,t,r){r.new_tab=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target,r.href=t.href,r.new_tab||e.preventDefault()},Xe.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout((function(){window.location=t.href}),0)};var Qe=function(e){this.props={},e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_hubble";var t=e.persistence;"cookie"!==t&&"localStorage"!==t&&(A("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie");"localStorage"===t&&function(){var e=!0;try{var t="__hbssupport__";T.localStorage.set(t,"xyz"),"xyz"!==T.localStorage.get(t)&&(e=!1),T.localStorage.remove(t)}catch(t){e=!1}return e||x("localStorage unsupported; falling back to cookie store"),e}()?this.storage=T.localStorage:this.storage=T.cookie,this.load(),this.update_config(e),this.upgrade(e),this.save()};Qe.prototype.properties=function(){var e={};return T.each(this.props,(function(t,r){T.include(Me,r)||(e[r]=t)})),e},Qe.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=T.extend({},e))}},Qe.prototype.upgrade=function(e){var t,r,n=e.upgrade;n&&(t="mp_super_properties","string"==typeof n&&(t=n),r=this.storage.parse(t),this.storage.remove(t),this.storage.remove(t,!0),r&&(this.props=T.extend(this.props,r.all,r.events))),e.cookie_name||"DATracker"===e.name||(t="mp_"+e.token+"_"+e.name,(r=this.storage.parse(t))&&(this.storage.remove(t),this.storage.remove(t,!0),this.register_once(r))),this.storage===T.localStorage&&(r=T.cookie.parse(this.name),T.cookie.remove(this.name),T.cookie.remove(this.name,!0),r&&this.register_once(r))},Qe.prototype.save=function(){this.disabled||this.storage.set(this.name,T.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure)},Qe.prototype.remove=function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)},Qe.prototype.clear=function(){this.remove(),this.props={}},Qe.prototype.register_once=function(e,t,r){return!!T.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===r?this.default_expiry:r,T.each(e,(function(e,r){this.props[r]&&this.props[r]!==t||(this.props[r]=e)}),this),this.save(),!0)},Qe.prototype.register=function(e,t){return!!T.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,T.extend(this.props,e),this.save(),!0)},Qe.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},Qe.prototype.safe_merge=function(e){return T.each(this.props,(function(t,r){r in e||(e[r]=t)})),e},Qe.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)},Qe.prototype.set_disabled=function(e){this.disabled=e,this.disabled&&this.remove()},Qe.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},Qe.prototype.get_cross_subdomain=function(){return this.cross_subdomain},Qe.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())},Qe.prototype._add_to_people_queue=function(e,t){var r=this._get_queue_key(e),n=t[e],i=this._get_or_create_queue(ze),o=this._get_or_create_queue(Re),a=this._get_or_create_queue(Be),s=this._get_or_create_queue($e),c=this._get_or_create_queue(Ve,[]);r===Ie?(T.extend(i,n),this._pop_from_people_queue(Be,n),this._pop_from_people_queue($e,n)):r===je?T.each(n,(function(e,t){t in o||(o[t]=e)})):r===Le?T.each(n,(function(e,t){t in i?i[t]+=e:(t in a||(a[t]=0),a[t]+=e)}),this):r===qe?T.each(n,(function(e,t){T.isArray(e)&&(t in s||(s[t]=[]),s[t]=s[t].concat(e))})):r===Ue&&c.push(n),S("打印数据:"),S(t),this.save()},Qe.prototype._pop_from_people_queue=function(e,t){var r=this._get_queue(e);T.isUndefined(r)||(T.each(t,(function(e,t){delete r[t]}),this),this.save())},Qe.prototype._get_queue_key=function(e){return e===ze?Ie:e===Re?je:e===Be?Le:e===Ve?Ue:e===$e?qe:void x("Invalid queue:",e)},Qe.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]},Qe.prototype._get_or_create_queue=function(e,t){var r=this._get_queue_key(e);return t=T.isUndefined(t)?{}:t,this.props[r]||(this.props[r]=t)},Qe.prototype.set_event_timer=function(e,t){var r=this.props.costTime||{};r[e]=t,this.props.costTime=r,this.save()},Qe.prototype.remove_event_timer=function(e){var t=(this.props.costTime||{})[e];return T.isUndefined(t)||(delete this.props.costTime[e],this.save()),t};var Ze=function(){},et=function(){},tt=Ce,rt=function(e,t,r){var n,o=r===Ee?xe:xe[r];if(o&&0===Se||o&&2===Se)n=o;else{if(o&&!T.isArray(o))return void x("You have already initialized "+r);n=new Ze}return n._init(e,t,r),n.people=new et,n.people._init(n),n.abtest=tt,n.abtest.init(n),i.DEBUG=i.DEBUG||n.get_config("debug"),n.__autotrack_enabled=n.get_config("autotrack"),!T.isUndefined(o)&&T.isArray(o)&&(n._execute_array.call(n.people,o.people),n._execute_array(o),n._execute_array.call(n.abtest,o.abtest)),n};Ze.prototype.init=function(e,t,r){if(T.isUndefined(r))x("You must name your new library: init(token, config, name)");else{if(r!==Ee){var n=rt(e,t,r);return xe[r]=n,n._loaded(),n}x("You must initialize the main DATracker object right after you include the DATracker js snippet")}},Ze.prototype._init=function(e,t,r){var n=this;n.__loaded=!0,n.config={},void 0!==t&&void 0!==t.single_page_config&&void 0===t.single_page_config.track_replace_state&&(t.single_page_config.track_replace_state=Ke.single_page_config.track_replace_state),n.pageOpenScene="Browser",n.set_config(T.extend({},Ke,t,{name:r,token:e,callback_fn:(r===Ee?r:"DATracker."+r)+"._jsc"})),c.lofter()&&n.set_config({clientHubbleDeviceId:c.getClientHubbleDeviceId()||""}),ce.init(e),ie.init(e,this),n._jsc=function(){},n.__dom_loaded_queue=[],n.__request_queue=[],n.__disabled_events=[],n._flags={disable_all_events:!1},n.persistence=n.cookie=new Qe(n.config),n.cookie.register({sessionReferrer:document.referrer}),n.cookie.register_once({updatedTime:0,sessionStartTime:0}),n.cookie.register_once({sendNumClass:{allNum:0,errSendNum:0}});var i=n.get_config("heatmap");T.isObject(i)&&(i.clickmap=i.clickmap||"default");var o=ne(n);n.get_appStatus=function(e){o.getAppStatus((function(t){try{"function"==typeof e&&e(t)}catch(e){}}))},n._get_SendCall=function(e,t,r,i){if(n.get_config("hubble_render_mode"))return!1;o.getSendCall(e,t,r,i)},ue.init(n,(function(){tt.isTestDebug()||tt.isEditor()?n.set_config({hubble_render_mode:!0}):n.set_config({hubble_render_mode:!1}),n._loaded(),n._send_da_activate(),ie.data.isAdClick&&n._ad_click(),n.get_config("is_single_page")&&(n.cookie.register({currentReferrer:location.href}),n._single_page()),n.get_config("track_pageview")?n.track_pageview():n._session()}))},Ze.prototype._sendNativeCall=function(e,t,r,n,i){(this.get_config("use_app_track")||i)&&"function"==typeof this._get_SendCall&&this._get_SendCall(e,t,r,n)},Ze.prototype._ad_click=function(){return this.track("da_ad_click")},Ze.prototype._session=function(e){var t=1*this.cookie.props.sessionStartTime/1e3,r=1*this.cookie.props.updatedTime/1e3,n=(this.cookie.props.sessionUuid,(new Date).getTime()),i=1*n/1e3,o=!this._check_referer();(0==t||i>r+60*this.config.session_interval_mins||o)&&(0==t?(this.cookie.register({sessionUuid:T.UUID(),sessionStartTime:(new Date).getTime()}),this._track_da_session_start()):(this._track_da_session_close(),this.cookie.register({sessionUuid:T.UUID(),sessionStartTime:(new Date).getTime()}),this._track_da_session_start())),this.cookie.register({updatedTime:n}),"function"==typeof e&&e()},Ze.prototype._track_da_session_start=function(e){return this.track("da_session_start")},Ze.prototype._track_da_session_close=function(e){var t=(new Date).getTime()-1,r=this.cookie.props.sessionStartTime;this.cookie.props.LASTEVENT&&this.cookie.props.LASTEVENT.time&&(t=this.cookie.props.LASTEVENT.time+1);var n=t,i=n-r;return this.track("da_session_close",{sessionCloseTime:n,sessionTotalLength:i})},Ze.prototype._check_referer=function(){var e=this.cookie.props.sessionReferrer,t=!0;return e?"cookie"===this.get_config("persistence")&&this.get_config("cross_subdomain_cookie")?T.get_second_domain(T.get_host(e))!=T.get_second_domain(window.location.host)&&(t=!1):T.get_host(e)!=window.location.host&&(t=!1):t=!0,t},Ze.prototype._single_page=function(){var e=this,t=location.href,r=function(){},n=function(){T.innerEvent.trigger("singlePage:change")};"hash"===this.get_config("single_page_config").mode?r=function(){e.cookie.register({sessionReferrer:t}),e._single_pageview(),t=location.href,n()}:"history"===this.get_config("single_page_config").mode&&(r=function(){e._single_pageview(),n()}),se.init({mode:this.get_config("single_page_config").mode,callback_fn:r,track_replace_state:this.get_config("single_page_config").track_replace_state})},Ze.prototype._loaded=function(){this.get_config("loaded")(this)},Ze.prototype._dom_loaded=function(){T.each(this.__dom_loaded_queue,(function(e){this._track_dom.apply(this,e)}),this),T.each(this.__request_queue,(function(e){this._send_request.apply(this,e)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},Ze.prototype._track_dom=function(e,t){if(this.get_config("img"))return x("You can't use DOM tracking functions with img = true."),!1;if(!Ge)return this.__dom_loaded_queue.push([e,t]),!1;var r=(new e).init(this);return r.track.apply(r,t)},Ze.prototype._prepare_callback=function(e,t){if(T.isUndefined(e))return null;if(Je){return function(r){e(r,t)}}var r=this._jsc,n=""+Math.floor(1e8*Math.random()),i=this.get_config("callback_fn")+"["+n+"]";return r[n]=function(i){delete r[n],e(i,t)},i},Ze.prototype._send_request=function(e,t,r,n,i){if(Fe)this.__request_queue.push(arguments);else{var o=this.get_config("verbose");if(t.verbose&&(o=!0),this.get_config("test")&&(t.test=1),o&&(t.verbose=1),this.get_config("img")&&(t.img=1,e+="da.gif"),Je||(r?t.callback=r:(o||this.get_config("test"))&&(t.callback="(function(){})")),t._=(new Date).getTime().toString(),e+="?"+T.HTTPBuildQuery(t),"img"in t){var a=document.createElement("img");a.src=e,a.width=1,a.height=1,"function"==typeof r&&r(0),a.onload=function(){this.onload=null},a.onerror=function(){this.onerror=null},a.onabort=function(){this.onabort=null}}else if(Je)try{var s=new XMLHttpRequest;s.open("GET",e,!0),s.withCredentials=!1,s.onreadystatechange=function(){if(4===s.readyState)if(i&&i(),200===s.status)r&&r(o?T.JSONDecode(s.responseText):Number(s.responseText));else{var e="Bad HTTP status: "+s.status+" "+s.statusText;x(e),r&&r(o?{status:0,error:e}:0),n&&n({state:s.status,statusText:s.statusText})}},s.send(null)}catch(e){x(e),i&&i(),n&&n({state:"notSend",statusText:e})}else{var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.defer=!0,c.src=e;var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(c,u)}}},Ze.prototype._execute_array=function(e){var t,r=[],n=[],i=[];T.each(e,(function(e){e&&(t=e[0],"function"==typeof e?e.call(this):T.isArray(e)&&"alias"===t?r.push(e):T.isArray(e)&&-1!==t.indexOf("track")&&"function"==typeof this[t]?i.push(e):n.push(e))}),this);var o=function(e,t){T.each(e,(function(e){T.isFunction(this[e[0]])&&this[e[0]].apply(this,e.slice(1))}),t)};o(r,this),o(n,this),o(i,this)},Ze.prototype.push=function(e){this._execute_array([e])},Ze.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},Ze.prototype.track=function(e,t,r,n){if("function"!=typeof r&&(r=function(){}),T.isUndefined(e))x("No event name provided to DATracker.track");else{if(!this._event_is_disabled(e)){this.cookie.load(),t=t||{};var i={},o=T.JSONDecode(T.JSONEncode(t)),a=this.persistence.remove_event_timer(e);if(!T.isUndefined(a)){var s=(new Date).getTime()-a;i.costTime=s}"da_session_close"==e&&(i.sessionCloseTime=o.sessionCloseTime,i.sessionTotalLength=o.sessionTotalLength,delete o.sessionCloseTime,delete o.sessionTotalLength),t=T.extend({},T.info.properties(),this.persistence.properties(),i);var c=this.get_config("property_blacklist");T.isArray(c)?T.each(c,(function(e){delete t[e]})):x("Invalid value for property_blacklist config: "+c);var u="e";We[e]?u=We[e].dataType:n&&(u=n),T.include(["da_session_start","da_session_close","da_activate"],e)||this._session(),"e"===u&&(this._check_referer()||this.cookie.register({sessionReferrer:location.href})),this.get_config("is_single_page")||T.include(["da_activate","da_session_close"],e)&&this.cookie.register({sessionReferrer:location.href}),this.get_config("is_single_page")&&t.sessionReferrer!=t.referrer&&(t.referrer=t.sessionReferrer,t.referring_domain=T.info.referringDomain(t.sessionReferrer));var l=(new Date).getTime();"da_session_close"==e&&(l=t.sessionCloseTime),"da_session_start"==e&&(l=t.sessionStartTime),this.register_once({persistedTime:l},"");var p={dataType:u,sessionUuid:this.cookie.props.sessionUuid,userId:this.persistence.props.user_id,currentUrl:t.current_url,referrer:t.referrer,referrerDomain:t.referring_domain,sdkVersion:t.lib_version,sdkType:Pe,deviceOs:t.deviceOs,deviceOsVersion:t.deviceOsVersion,devicePlatform:t.hb_lib,browser:t.browser,browserVersion:t.browser_version,screenWidth:t.screen_width,screenHeight:t.screen_height,sessionTotalLength:t.sessionTotalLength,eventId:e,appKey:this.get_config("token"),time:l,persistedTime:this.cookie.props.persistedTime,deviceUdid:this.get_distinct_id(),deviceModel:T.trim(t.deviceModel),pageTitle:t.title,urlPath:t.url_path,currentDomain:t.currentDomain,pageOpenScene:this.pageOpenScene,userAgent:window.navigator.userAgent},d=ie.getParams(),f=ce.getParams();if(p=T.extend(p,d),p=T.extend(p,f),this.get_config("activityId")&&(o.activityId=this.get_config("activityId")),this.get_config("clientHubbleDeviceId")&&(o.clientHubbleDeviceId=this.get_config("clientHubbleDeviceId")),o.channel&&window.console.warn("channel 为保留字段！埋点参数不能存在保留字段\n"+e+"点携带参数 channel"),T.cookie.get("_ACT_CHANNEL")&&(o.channel=T.cookie.get("_ACT_CHANNEL")),"e"===u&&(o=T.extend({},this.cookie.props.superProperties||{},o)),"pv"===u&&"object"===_typeof(this.pageview_attributes)&&(o=T.extend({},this.pageview_attributes||{},o)),p.attributes=o,T.size(p.attributes)||delete p.attributes,p.referrer||delete p.referrer,p.referrerDomain||delete p.referrerDomain,p.pageTitle||delete p.pageTitle,p.urlPath||delete p.urlPath,p.userId||delete p.userId,t.costTime&&(p.costTime=t.costTime,delete t.costTime),this.get_config("hubble_render_mode"))return tt.debugTrack(p),!1;var _=this.get_config("truncateLength"),h=p;"[object Number]"===Object.prototype.toString.call(_)&&_>0&&(h=T.truncate(p,_));var g=T.JSONEncode(h),b=T.base64Encode(g),m=T.sha1(this.get_config("token"));S("DATracker REQUEST:"),S(h);var v=this,y=function(){var t=v.cookie.props.sendNumClass;"da_session_start"===e&&(t.allNum=0,t.errSendNum=0),"da_send_error"!==e&&"da_activate"!==e&&(t.allNum+=1),v.cookie.register({sendNumClass:t})},k=function(t){if("da_send_error"!==e&&"da_activate"!==e){var r=v.cookie.props.sendNumClass.errSendNum;v.cookie.props.sendNumClass.allNum;"da_session_start"===e&&(r=0),r+=1,v.get_config("send_error")&&(t=T.extend({eventId:e,time:l,allNum:v.cookie.props.sendNumClass.allNum,errSendNum:r},t),v.track("da_send_error",t)),v.cookie.register({sendNumClass:{allNum:v.cookie.props.sendNumClass.allNum,errSendNum:r}})}},w=function(){v._send_request(v.get_config("distribution_api_host")+"/track/w/",{data:b,appKey:m},v._prepare_callback(r,h),k,y)};return this.get_config("use_app_track")?this._sendNativeCall(g,e,r,w):w(),this.get_config("debug")&&T.isFunction(this.debug)&&(this.get_config("use_app_track")&&T.include(["da_session_close","da_session_start","da_activate","da_u_login","da_u_logout","da_u_signup"],e)||this.debug({data:b})),T.include(["da_session_close","da_session_start"],e)||this.cookie.register({LASTEVENT:{eventId:e,time:l}}),h}r(0)}},Ze.prototype._send_request_yueduStatistic=function(e,t,r,n,i){var o=this.get_config("verbose");t.verbose&&(o=!0),this.get_config("test")&&(t.test=1),o&&(t.verbose=1),Je||(r?t.callback=r:(o||this.get_config("test"))&&(t.callback="(function(){})")),t._=(new Date).getTime().toString();try{var a=new XMLHttpRequest;"get"===t.method?(e+="?"+T.HTTPBuildQuery(t),a.open("get",e,!0)):(a.open("post",e,!0),a.withCredentials=!1,a.setRequestHeader("Content-Type","application/json;charset=UTF-8")),a.onreadystatechange=function(){if(4===a.readyState)if(i&&i(),200===a.status)r&&r(o?T.JSONDecode(a.responseText):Number(a.responseText));else{var e="Bad HTTP status: "+a.status+" "+a.statusText;x(e),r&&r(o?{status:0,error:e}:0),n&&n({state:a.status,statusText:a.statusText})}},a.send(JSON.stringify(t))}catch(e){x(e),i&&i(),n&&n({state:"notSend",statusText:e})}},Ze.prototype.trackYueduStatistic=function(e,t,r,n){if("function"!=typeof r&&(r=function(){}),T.isUndefined(e))x("No event name provided to DATracker.track");else{if(!this._event_is_disabled(e)){this.cookie.load(),t=t||{};var i={},o=T.JSONDecode(T.JSONEncode(t)),a=this.persistence.remove_event_timer(e);if(!T.isUndefined(a)){var s=(new Date).getTime()-a;i.costTime=s}"da_session_close"==e&&(i.sessionCloseTime=o.sessionCloseTime,i.sessionTotalLength=o.sessionTotalLength,delete o.sessionCloseTime,delete o.sessionTotalLength),t=T.extend({},T.info.properties(),this.persistence.properties(),i);var c=this.get_config("property_blacklist");T.isArray(c)?T.each(c,(function(e){delete t[e]})):x("Invalid value for property_blacklist config: "+c);var u="e";We[e]?u=We[e].dataType:n&&(u=n),T.include(["da_session_start","da_session_close","da_activate"],e)||this._session(),"e"===u&&(this._check_referer()||this.cookie.register({sessionReferrer:location.href})),this.get_config("is_single_page")||T.include(["da_activate","da_session_close"],e)&&this.cookie.register({sessionReferrer:location.href}),this.get_config("is_single_page")&&t.sessionReferrer!=t.referrer&&(t.referrer=t.sessionReferrer,t.referring_domain=T.info.referringDomain(t.sessionReferrer));var l=(new Date).getTime();"da_session_close"==e&&(l=t.sessionCloseTime),"da_session_start"==e&&(l=t.sessionStartTime),this.register_once({persistedTime:l},"");var p={dataType:u,sessionUuid:this.cookie.props.sessionUuid,userId:this.persistence.props.user_id,currentUrl:t.current_url,referrer:t.referrer,referrerDomain:t.referring_domain,sdkVersion:t.lib_version,sdkType:Pe,deviceOs:t.deviceOs,deviceOsVersion:t.deviceOsVersion,devicePlatform:t.hb_lib,browser:t.browser,browserVersion:t.browser_version,screenWidth:t.screen_width,screenHeight:t.screen_height,sessionTotalLength:t.sessionTotalLength,eventId:e,appKey:this.get_config("token"),time:l,persistedTime:this.cookie.props.persistedTime,deviceUdid:this.get_distinct_id(),deviceModel:T.trim(t.deviceModel),pageTitle:t.title,urlPath:t.url_path,currentDomain:t.currentDomain,pageOpenScene:this.pageOpenScene,userAgent:window.navigator.userAgent},d=ie.getParams(),f=ce.getParams();if(p=T.extend(p,d),p=T.extend(p,f),o.activityId&&this.get_config("activityId")!==o.activityId&&window.console.warn("activityId 不一致！\nSDK初始化 activityId："+this.get_config("activityId")+"\n"+e+" 点 activityId："+o.activityId),!o.activityId&&this.get_config("activityId")&&(o.activityId=this.get_config("activityId")),this.get_config("clientHubbleDeviceId")&&(o.clientHubbleDeviceId=this.get_config("clientHubbleDeviceId")),o.channel&&window.console.warn("channel 为保留字段！埋点参数不能存在保留字段\n"+e+"点携带参数 channel"),T.cookie.get("_ACT_CHANNEL")&&(o.channel=T.cookie.get("_ACT_CHANNEL")),"e"===u&&(o=T.extend({},this.cookie.props.superProperties||{},o)),"pv"===u&&"object"===_typeof(this.pageview_attributes)&&(o=T.extend({},this.pageview_attributes||{},o)),p.attributes=o,T.size(p.attributes)||delete p.attributes,p.referrer||delete p.referrer,p.referrerDomain||delete p.referrerDomain,p.pageTitle||delete p.pageTitle,p.urlPath||delete p.urlPath,p.userId||delete p.userId,t.costTime&&(p.costTime=t.costTime,delete t.costTime),this.get_config("hubble_render_mode"))return tt.debugTrack(p),!1;var _=this.get_config("truncateLength"),h=p;"[object Number]"===Object.prototype.toString.call(_)&&_>0&&(h=T.truncate(p,_));var g=T.JSONEncode(h),b=T.base64Encode(g),m=T.sha1(this.get_config("token"));S("DATracker REQUEST:"),S(h);var v=this,y=function(){var t=v.cookie.props.sendNumClass;"da_session_start"===e&&(t.allNum=0,t.errSendNum=0),"da_send_error"!==e&&"da_activate"!==e&&(t.allNum+=1),v.cookie.register({sendNumClass:t})},k=function(t){if("da_send_error"!==e&&"da_activate"!==e){var r=v.cookie.props.sendNumClass.errSendNum;v.cookie.props.sendNumClass.allNum;"da_session_start"===e&&(r=0),r+=1,v.get_config("send_error")&&(t=T.extend({eventId:e,time:l,allNum:v.cookie.props.sendNumClass.allNum,errSendNum:r},t),v.track("da_send_error",t)),v.cookie.register({sendNumClass:{allNum:v.cookie.props.sendNumClass.allNum,errSendNum:r}})}},w=o.method||"post",A=function(){v._send_request_yueduStatistic("get"===w?v.get_config("distribution_get_interface"):v.get_config("distribution_interface"),{data:b,appKey:m,method:w},v._prepare_callback(r,h),k,y)};return void 0!==o.useAppTrack?o.useAppTrack?this._sendNativeCall(g,e,r,A,!0):A():this.get_config("use_app_track")?this._sendNativeCall(g,e,r,A):A(),this.get_config("debug")&&T.isFunction(this.debug)&&(this.get_config("use_app_track")&&T.include(["da_session_close","da_session_start","da_activate","da_u_login","da_u_logout","da_u_signup"],e)||this.debug({data:b})),T.include(["da_session_close","da_session_start"],e)||this.cookie.register({LASTEVENT:{eventId:e,time:l}}),h}r(0)}},Ze.prototype.track_pageview=function(e,t,r){T.isUndefined(t)&&(t=document.location.href);var n=this;this._session((function(){var t=n.track("da_screen",T.extend({},e));"function"==typeof r&&r(t)}))},Ze.prototype._send_da_activate=function(){var e={};return this.get_distinct_id()||(this.register_once({deviceUdid:T.UUID()},""),e=this.track("da_activate")),e},Ze.prototype.register_attributes=function(e){if("object"===_typeof(e)){var t=this.cookie.props.superProperties||{};t=T.extend({},t,e),this.register({superProperties:t})}},Ze.prototype.register_attributes_once=function(e){if("object"===_typeof(e)){var t=this.cookie.props.superProperties||{};t=T.extend({},e,t),this.register({superProperties:t})}},Ze.prototype.current_attributes=function(e){"function"==typeof e&&e(this.cookie.props.superProperties||{})},Ze.prototype.unregister_attributes=function(e){if("string"==typeof e){var t=this.cookie.props.superProperties||{};delete t[e],this.register({superProperties:t})}},Ze.prototype.clear_attributes=function(){this.register({superProperties:{}})},Ze.prototype.single_pageview=function(){},Ze.prototype._single_pageview=function(){var e=location.href,t=this.cookie.props.currentReferrer||location.href;this.get_config("is_single_page")&&("hash"!==this.get_config("single_page_config").mode&&"history"!==this.get_config("single_page_config").mode&&"memoryhistory"!==this.get_config("single_page_config").mode||this.cookie.register({sessionReferrer:t,currentReferrer:e}),this.track_pageview({},e))},Ze.prototype.track_links=function(){return this._track_dom.call(this,Xe,arguments)},Ze.prototype.time_event=function(e){T.isUndefined(e)?x("No event name provided to DATracker.time_event"):this._event_is_disabled(e)||this.persistence.set_event_timer(e,(new Date).getTime())},Ze.prototype.register=function(e,t){this.persistence.register(e,t)},Ze.prototype.register_once=function(e,t,r){this.persistence.register_once(e,t,r)},Ze.prototype.unregister=function(e){this.persistence.unregister(e)},Ze.prototype._register_single=function(e,t){var r={};r[e]=t,this.register(r)},Ze.prototype.signup=function(e){var t=this.get_user_id();if((t=null==t?"":t)!=e)return this._register_single("user_id",e),this.track("da_u_signup",{oldUserId:t,newUserId:e})},Ze.prototype.login=function(e){T.innerEvent.trigger("userId:change",{type:"login",userId:e});var t=this.signup(e),r=this.track("da_u_login");return this._register_single("user_id",e),{data_signup:t,data_login:r}},Ze.prototype.logout=function(e){T.innerEvent.trigger("userId:change",{type:"logout",userId:this.get_distinct_id()}),this.unregister("user_id");var t=!1;function r(){t||(t=!0,"function"==typeof e&&e())}return setTimeout(r,this.get_config("track_links_timeout")),this.track("da_u_logout",{},r)},Ze.prototype.set_userId=function(e){this._register_single("user_id",e)},Ze.prototype.reset=function(){this.persistence.clear(),this.register_once({deviceUdid:T.UUID()},"")},Ze.prototype.get_distinct_id=function(){return this.get_property("deviceUdid")},Ze.prototype.get_user_id=function(){return this.get_property("user_id")},Ze.prototype.set_config=function(e){T.isObject(e)&&(T.extend(this.config,e),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),i.DEBUG=i.DEBUG||this.get_config("debug"))},Ze.prototype.get_config=function(e){return this.config[e]},Ze.prototype.get_property=function(e){return this.persistence.props[e]},Ze.prototype.toString=function(){var e=this.get_config("name");return e!==Ee&&(e="DATracker."+e),e},Ze.prototype._event_is_disabled=function(e){return T.isBlockedUA(O)||this._flags.disable_all_events||T.include(this.__disabled_events,e)},et.prototype._init=function(e){this._DATracker=e},et.prototype.set=function(e,t,r){var n={},i={};return T.isObject(e)?(T.each(e,(function(e,t){this._is_reserved_property(t)||(i[t]=e)}),this),r=t):i[e]=t,void 0===i.$userProfile&&(i.$type="profile_set",i={$userProfile:i}),n.attributes=i,this._send_request(n,r)},et.prototype.set_once=function(e,t,r){var n={},i={};return T.isObject(e)?(T.each(e,(function(e,t){this._is_reserved_property(t)||(i[t]=e)}),this),r=t):i[e]=t,void 0===i.$userProfile&&(i.$type="profile_set_once",i={$userProfile:i}),n.attributes=i,this._send_request(n,r)},et.prototype.set_realname=function(e){this.set({$realName:e})},et.prototype.set_country=function(e){this.set({$country:e})},et.prototype.set_province=function(e){this.set({$region:e})},et.prototype.set_region=function(e){this.set({$region:e})},et.prototype.set_city=function(e){this.set({$city:e})},et.prototype.set_age=function(e){this.set({$age:e})},et.prototype.set_gender=function(e){0!=e&&1!=e&&2!=e||this.set({$gender:e})},et.prototype.set_birthday=function(e){T.checkTime(e)&&this.set({$birthday:e})},et.prototype.set_account=function(e){this.set({$account:e})},et.prototype.set_populationWithAccount=function(e,t,r,n){e&&t&&r&&n&&T.checkTime(r)&&this.set({$account:e,$realName:t,$birthday:r,$gender:n})},et.prototype.set_location=function(e,t,r){e&&t&&r&&this.set({$country:e,$region:t,$city:r})},et.prototype.append=function(e,t,r){var n={},i={};return T.isObject(e)?(T.each(e,(function(e,t){this._is_reserved_property(t)||(i[t]=e)}),this),r=t):i[e]=t,void 0===i.$userProfile&&(i.$type="profile_append",i={$userProfile:i}),n.attributes=i,this._send_request(n,r)},et.prototype.toString=function(){return this._DATracker.toString()+".people"},et.prototype._send_request=function(e,t){if(this._DATracker.cookie.props.hubble_render_mode)return!1;e.dataType="ie",e.appKey=this._get_config("token"),e.deviceUdid=this._DATracker.get_distinct_id(),e.userId=this._DATracker.get_user_id(),e.time=(new Date).getTime(),e.sdkType=Pe,e.eventId="da_user_profile",e.persistedTime=this._DATracker.cookie.props.persistedTime,e.pageOpenScene="Browser";var r=ie.getParams(),n=ce.getParams();e=T.extend(e,r),e=T.extend(e,n);var i=T.encodeDates(e),o=this._DATracker.get_config("truncateLength"),a=i;"[object Number]"===Object.prototype.toString.call(o)&&o>0&&(a=T.truncate(i,o));var s=T.JSONEncode(i),c=T.base64Encode(s);S("打印数据:"),S(a);var u=T.sha1(this._DATracker.get_config("token")),l=this,p=function(){l._DATracker._send_request(l._get_config("distribution_api_host")+"/track/w/",{data:c,appKey:u},l._DATracker._prepare_callback(t,a))};return this._DATracker.get_config("use_app_track")?this._DATracker._sendNativeCall(s,"$da_user_profile",t,p):p(),this._DATracker.get_config("debug")&&T.isFunction(this._DATracker.debug)&&this._DATracker.debug({data:c}),a},et.prototype._get_config=function(e){return this._DATracker.get_config(e)},et.prototype._user_logined=function(){return void 0!==this._DATracker.get_user_id()},et.prototype._enqueue=function(e){ze in e?this._DATracker.persistence._add_to_people_queue(ze,e):Re in e?this._DATracker.persistence._add_to_people_queue(Re,e):Be in e?this._DATracker.persistence._add_to_people_queue(Be,e):Ve in e?this._DATracker.persistence._add_to_people_queue(Ve,e):$e in e?this._DATracker.persistence._add_to_people_queue($e,e):x("Invalid call to _enqueue():",e)},et.prototype._is_reserved_property=function(e){return"$deviceUdid"===e||"$token"===e},Ze.prototype.init=Ze.prototype.init,Ze.prototype.reset=Ze.prototype.reset,Ze.prototype.disable=Ze.prototype.disable,Ze.prototype.time_event=Ze.prototype.time_event,Ze.prototype.track=Ze.prototype.track,Ze.prototype.track_links=Ze.prototype.track_links,Ze.prototype.track_pageview=Ze.prototype.track_pageview,Ze.prototype.register=Ze.prototype.register,Ze.prototype.register_once=Ze.prototype.register_once,Ze.prototype.unregister=Ze.prototype.unregister,Ze.prototype.alias=Ze.prototype.alias,Ze.prototype.set_config=Ze.prototype.set_config,Ze.prototype.get_config=Ze.prototype.get_config,Ze.prototype.get_property=Ze.prototype.get_property,Ze.prototype.get_distinct_id=Ze.prototype.get_distinct_id,Ze.prototype.toString=Ze.prototype.toString,Ze.prototype.login=Ze.prototype.login,Ze.prototype.logout=Ze.prototype.logout,Ze.prototype.get_user_id=Ze.prototype.get_user_id,Ze.prototype.register_attributes=Ze.prototype.register_attributes,Ze.prototype.register_attributes_once=Ze.prototype.register_attributes_once,Ze.prototype.clear_attributes=Ze.prototype.clear_attributes,Ze.prototype.unregister_attributes=Ze.prototype.unregister_attributes,Ze.prototype.current_attributes=Ze.prototype.current_attributes,Qe.prototype.properties=Qe.prototype.properties,Qe.prototype.get_cross_subdomain=Qe.prototype.get_cross_subdomain,Qe.prototype.clear=Qe.prototype.clear,et.prototype.set=et.prototype.set,et.prototype.set_once=et.prototype.set_once,et.prototype.append=et.prototype.append,et.prototype.toString=et.prototype.toString;var nt={},it=function(){xe.init=function(e,t,r){if(r)return xe[r]||(xe[r]=nt[r]=rt(e,t,r),xe[r]._loaded()),xe[r];var n=xe;nt.DATracker?n=nt.DATracker:e&&((n=rt(e,t,Ee))._loaded(),nt.DATracker=n),xe=n,1!==Se&&2!==Se||(window.DATracker=xe),T.each(nt,(function(e,t){t!==Ee&&(xe[t]=e)})),xe._=T}};Se=2,xe=new Ze,it(),xe.init(),function(){function e(){e.done||(e.done=!0,Ge=!0,Fe=!1,T.each(nt,(function(e){e._dom_loaded()})))}if(document.addEventListener)"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e);var t=!1;try{t=null===window.frameElement}catch(e){}document.documentElement.doScroll&&t&&function t(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}e()}()}T.register_event(window,"load",e,!0)}()}();